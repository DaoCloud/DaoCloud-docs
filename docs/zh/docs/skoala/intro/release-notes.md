# 微服务引擎 Release Notes

本页列出微服务引擎的 Release Notes，便于您了解各版本的演进路径和特性变化。

*[skoala]: DaoCloud 微服务引擎的内部开发代号

## 2024-12-31

### v0.43.4

- **优化** 界面与用户体验

## 2024-12-25

### v0.43.3

- **修复** Nacos 负载均衡模式 API 的问题
- **修复** 全局限流服务器标签展示不正常的问题
- **修复** Nacos 列表日志不正常的问题

!!! note

    为支持网关日志滚动更新与添加调试工具，升级网关运行时至私有版本 v0.32.0-dcv3
    （基于 Envoy v1.32.0 构建，如不需要网关日志滚动更新功能，仍然可以只用社区版 Envoy v1.32.0）

## 2024-11-30

### v0.43.2

#### 新增

- **新增** 创建网关时页面应该支持自定义注解
- **新增** 网关日志文件自动拆分滚动更新能力

#### 修复

- **修复** 当用户名为中文时资源无法加载的问题
- **修复** 网关高级配置默认值不生效的问题
- **修复** 编辑网关时出现无意义的注解问题

#### 优化

- **优化** 网关日志滚动更新逻辑，避免日志丢失情况（更新网关运行时至私有版本 v0.31.0-dcv2）
- **优化** 禁用 skoala-agent 的 /debug/pprof 接口，避免安全风险
- **优化** 更新 Nacos 2.4.3 替代 2.4.2.1 版（稳定版仍为 2.3.2）
- **优化** 网关默认网络连接数为较大值，可有效避免由于网络连接数默认值过小导致的性能问题
- **优化** 移除 Skoala Init Helm Chart 针对 Insight CRD ServiceMonitor 的检测，避免安装功能不完整的 Skoala Init 组件
- **优化** 升级网关控制面 Contour 至 v1.30.1-0be3efa
- **优化** 为支持网关日志滚动更新升级网关运行时至私有版本 v0.31.0-dc（如不需要网关日志滚动更新功能，仍然可以只用社区版 Envoy v1.31.0）

## 2024-10-31

### v0.42.1

#### 新增

- **新增** MetalLB 的安装状态检测支持
- **新增** 网关支持自定义 dns-lookup-family 能力
- **新增** 全局限流规则管理
- **新增** 支持内置全局限流插件模板

#### 修复

- **修复** 网关插件在界面中无法展示查看的问题
- **修复** 调用容器管理组件注解不正常的问题
- **修复** 网关 API 删除操作不符合预期的问题
- **修复** 插件中心主菜单跳转链接不正确的问题
- **修复** 固定 IP 设置后界面展示不正常的问题
- **修复** 网关限流策略不能关闭的问题
- **修复** 云原生微服务使用限流规则异常的问题
- **修复** 托管资源展示的小数位数过多的问题

#### 优化

- **优化** 托管 Nacos 8848/9848 端口对应 NodePort 选择逻辑，由随机端口改为筛选可用端口
- **优化** 更新 Nacos 2.4.2.1 替代 2.4.1 版（稳定版仍为 2.3.2）
- **优化** 升级网关控制面 Contour 至 v1.30.0-54ceade
- **优化** 增强网关插件缓存读取的机制，增加等待时间

## 2024-09-30

### v0.41.3

#### 新增

- **新增** 域名为 HTTPS 时 API 允许配置非安全请求

#### 修复

- **修复** 不能按照命名空间展示 skoala-init 安装情况的问题
- **修复** 网关统计在网关运行时多副本情况下不符合预期的问题
- **修复** 安装时 CRD 不存在的问题
- **修复** 离线镜像逻辑
- **修复** 审计日志部分记录不全的问题
- **修复** 当托管 Nacos 所在集群失联时 Nacos 实例状态不符合预期的问题
- **修复** 当网关所在集群失联时网关实例状态不符合预期的问题
- **修复** 网关 API 的域名为 HTTP 调试的时 HTTPS POST 请求不选择跳过证书验证时调试失败的问题
- **修复** 网关 API 策略展示逻辑不正确的问题
- **修复** 当托管 Nacos 实例的端口被占用时 Nacos 实例状态不符合预期的问题
- **修复** 网关工作节点实例列表没有 Pod IP 的问题

#### 优化

- **优化** 证书及令牌管理逻辑
- **优化** 为云原生微服务添加自定义插件支持
- **优化** 托管 Nacos 所支持的版本中由 v2.4.0.1 升级为 v2.4.1

## 2024-09-02

### v0.40.1

- **修复** 网关共享 LB VIP 时无法使用的问题

## 2024-08-26

### v0.40.0

#### 新功能

- **新增** Nacos 基于元数据标签查询服务实例
- **新增** 网关实例概览中，展示节点固定 IP

#### 修复

- **修复** 网关控制面某些情况下重启不符合预期的问题
- **修复** 托管 Nacos 命名空间相关 API 无法使用的问题
- **修复** 网关 API 导入时 API 名称校验不符合预期的问题
- **修复** 管理组件 CVE-2024-41110 漏洞

#### 优化

- **优化** 升级网关运行时 Envoy 到 v1.31.0
- **优化** 升级网关控制面 Contour 到 v1.30.0-d59d534
- **优化** 扩展网关证书有效时间配置，默认时间为 5 年，更新或新创建网关时皆可生效
- **优化** 升级 Nacos 到 v2.4.0.1，默认版本生然为稳定版 v2.3.2
- **优化** Nacos 命名空间删除时的相关资源依赖检测
- **优化** 网关删除功能，现在允许强制删除工作异常的网关实例
- **优化** 网关域名安全策略校验逻辑
- **优化** 网关 API 导入时异常信息的展示能力

!!! note

    任意版本升级到 0.40.x 时，由于 Gateway API 社区版本原因需要手动处理 CRD 升级，
    参考 [Skoala 0.40.x 升级注意事项](#skoala-040x)。

## 2024-08-16

### v0.39.4

- **修复** 托管 Nacos 命名空间相关 API 无法使用的问题.

## 2024-08-15

### v0.39.3

- **修复** 托管 Nacos 命名空间相关 API 无法使用的问题.

## Skoala 0.40.x 升级注意事项

### 影响版本

从任意版本升级至 0.40.x。

### 影响说明

0.40.x 版本中更新了相关自定义资源（CRD），由于在 skoala-init Chart 对应组件 `crds` 目录中的自定义资源不会自动随安装被更新，
本次更新的 CRD 为 gateway-api CRD，BackendTLSPolicy 升级需要手动操作。
由于本次更新的内容存在社区兼容性问题，[详情参考 kubernetes-sigs 相关 issue](https://github.com/kubernetes-sigs/gateway-api/issues/3086)。

### 升级步骤

请按照如下步骤手动更新需要升级的网关 CRD 文件：

1. 删除 BackendTLSPolicy：

    ```shell
    kubectl delete crds `kubectl get crds | grep -E "backendtlspolicies.gateway.networking.k8s.io"`
    ``` 
   
2. 手动更新网关相关 CRD 文件

    ```shell
    # projectcontour 相关 crd
    kubectl apply -f skoala-init/charts/contour-provisioner/crds/contour.yaml
    # gateway-api 相关 crd
    kubectl apply -f skoala-init/charts/contour-provisioner-prereq/crds/gateway-api.yaml
    ```

## 2024-08-06

### v0.39.2

#### 修复

- **修复** 网关插件名称展示错误的问题
- **修复** 分布式事务组件数据库地址错误时无法编辑的问题
- **修复** 托管 Nacos 实例在以 NodePort 方式部署时端口被占用情况下无法编辑的问题
- **修复** 网关请求 Top 10 总请求数量数据不符合预期的问题
- **修复** Sesame 管理组件注入 Istio Sidecar 时报错的问题

#### 优化

- **优化** 适配 Istio v1.23.0
- **优化** 解决 Hive 管理组件线程泄露的问题

## 2024-07-31

### v0.39.1

- **修复** Nacos 镜像版本错误的问题

## 2024-07-25

### v0.39.0

#### 新功能

- **新增** Nacos 支持集成 LDAP 认证
- **新增** Nacos 删除前检测能力

#### 修复

- **修复** 网关及插件相关权限问题
- **修复** Nacos 异常情况启动问题
- **修复** Nacos 删除操作接口返回不符合预期的问题
- **修复** 网关开启后默认添加标签不正确的问题

#### 优化

- **优化** Docker 基础镜像至 3.20.1
- **优化** 权限逻辑，自动通过 API 定义生成权限点
- **优化** 弃用 ListGatewayPodsByType

## 2024-07-02

### v0.38.2

- **修复** 网关统计 Top10 API 相关展示问题

## 2024-06-25

### v0.38.1

- **新增** 网关接入注册中心服务支持自动填充和多实例
- **新增** 网关日志自定义数据
- **新增** 网关 `API` 文档中集成 `API` 测试能力
- **修复** 离线包公共镜像拉取问题

## 2024-06-25

### v0.38.0

#### 修复

- **修复** 设置 Nacos 环境变量不生效问题
- **修复** 当网关内存设置为小数时与最大堆内存的配比错误的问题
- **修复** 网关日志中涉及域名查询的权限问题
- **修复** 接入注册中心相关时间显示不正常的问题

#### 优化

- **优化** 升级 Ghippo 集成 SDK 至 v0.28.0-dev1 版
- **优化** 配合新版本 Ghippo SDK 调整权限依赖逻辑

## 2024-06-04

### v0.37.1

- **修复** 托管 Nacos 详情中版本展示不正确的问题
- **修复** 微服务 JVM 监控跳转链接不正确的问题
- **修复** 流量泳道引流规则接口调用不正常的问题
- **修复** 分布式事务对接 Nacos 时用户名密码配置不符合预期的问题

## 2024-05-27

### v0.37.0

#### 新功能

- **新增** 支持分布式事务组件在概览中的异常信息
- **新增** 网关日志中支持状态码筛选
- **新增** nacos jvm 实现可配置
- **新增** 新增网关 API 测试相关的日志查询功能
- **新增** 支持网关外接服务多实例能力
- **新增** 支持 Seata 关联的 Nacos 密码自定义

#### 修复

- **修复** 网关 API 详情页面显示异常的问题
- **修复** 网关本地限流策略不正常的问题
- **修复** 域名级别鉴权插件关闭不正常的问题
- **修复** 网关根命名空间过滤和检查的问题
- **修复** 英文版本 Sentinel 监控面板中出现中文的问题

#### 优化

- **优化** 升级托管 Nacos 版本至 2.3.2 替代 2.3.1 版
- **优化** API 并添加按工作空间隔离能力
- **优化** 网关插件及自定义插件逻辑
- **优化** 服务网格集成逻辑
- **优化** 网关控制面组件版本及相关自定义资源
- **优化** 网关 API 导出功能中跳过流量泳道相关 API

!!! note

    重要：0.37.x 版本中更新了相关自定义资源（CRD），由于在 Chart crds 目录中的自定义资源不会自动随安装被更新，
    请升级后手动应用相关 CRD 到工作集群，该文件位于：
    skoala-init/charts/contour-provisioner/crds/contour.yaml

## 2024-04-30

### v0.36.1

- **修复** 云原生微服务流量泳道引流规则权限点缺失的问题
- **修复** 网关注入网格边车后链路信息上报不正常的问题

## 2024-04-26

### v0.36.0

#### 新功能

- **新增** 支持网关自定义插件

#### 修复

- **修复** 分布式事务相关 Nacos 和数据库配置不正常的问题
- **修复** 网关内存资源配置展示不准确的问题
- **修复** Nacos 和分布式事务组件异常信息不准确的问题
- **修复** 带有证书的网关 API 编辑保存不正常的问题
- **修复** 网关日志查询有时不正常的问题

#### 优化

- **优化** Nacos 至 2.3.1 替代其 2.3.0 版
- **优化** 网关 API 测试对于 ClusterIP 不可用时的提示

## 2024-04-11

### v0.35.2

- **修复** 全局管理中微服务引擎模块权限点不准确的问题
- **修复** 网关全局限流保存不正常的问题
- **修复** 网关创建时内存配置不正常的问题
- **修复** 网关运行时最大堆内存配置不正常的问题
- **修复** 接入注册中心 Eureka 相关时间显示不正常的问题
- **修复** 自定义密码的 Nacos 创建 Seata 不正常的问题
- **修复** Seata 初始化数据库异常的问题

!!! note

    重要：0.35.x 版本中更新了 Gateway API 相关自定义资源（CRD），由于 Chart 更新不会自动应用 CRD 变更，
    请升级后手动应用该位置的 CRD：skoala-init/charts/contour-provisioner-prereq/crds/gateway-api.yaml

## 2024-04-03

### v0.35.1

- **修复** 网关中创建域名时报错的问题
- **修复** 托管 Nacos 资源检查不符合预期的问题
- **修复** 网关域名开启健康检查端口并在 API 增加健康检查配置后 API 状态异常的问题
- **修复** 网关 API 统计概述不正确的问题
- **修复** 接入注册中心状态不正常的问题
- **修复** 创建流量泳道时相关资源注解不正常的问题
- **修复** 网关自定义插件功能相关问题

!!! note

    重要：0.35.x 版本中更新了 Gateway API 相关自定义资源（CRD），由于 Chart 更新不会自动应用 CRD 变更，
    请升级后手动应用该位置的 CRD：skoala-init/charts/contour-provisioner-prereq/crds/gateway-api.yaml

## 2024-03-23

### v0.35.0

#### 新功能

- **新增** 云原生网关 API 可以通过请求参数进行路由匹配的能力
- **新增** 分布式事务 Seata 自定义密码的能力
- **新增** 分布式事务 Grafana 面板时间筛选能力
- **新增** 支持按命名空间创建筛选云原生微服务流量泳道的能力

#### 修复

- **修复** 接入注册中心类型相关的问题
- **修复** 网关实例数量为零时提示信息不准确的问题
- **修复** 云原生微服务相关的逻辑
- **修复** 流量泳道列表首次加载不刷新的问题
- **修复** Sentinel 密码展示不正确的问题
- **修复** Envoy 作为 xdsServer 时新建 API 导致空指针的问题
- **修复** 当网格实例没有服务时分页异常的问题
- **修复** 由于服务网格模块 API 变更产生的问题

#### 优化

- **优化** 升级适配分布式事务 Seata 2.0 支持的能力
- **优化** 将托管注册中心 Nacos 2.3.0 作为默认版本
- **优化** 网关 API 统计图表算法改为增量统计方式

## 2024-03-06

### v0.33.4

- **修复** 原生微服务相关的逻辑
- **修复** 流量泳道列表首次加载不刷新的问题
- **修复** Sentinel 密码展示不正确的问题
- **修复** 由于网格模块 API 变更产生的集成问题

## 2024-03-01

### v0.33.3

- **修复** 云原生微服务相关的逻辑
- **修复** 由于网格模块 API 变更产生的问题

## 2024-02-02

### v0.34.0

- **新增** 根据应用工作台需求在网关查询端口中添加网关所部署的命名空间信息
- **优化** 网关日志分页查询的总数，于可观测逻辑匹配，限制为最多展示 10000 条列表日志数据
- **优化** 网关日志查询的错误提示

## 2024-02-01

### v0.33.2

- **修复** 网关服务组件会异常重启的问题
- **修复** 网关日志导出不正常的问题
- **修复** 当网关工作负载副本为 0 时展示状态不正常的问题
- **修复** 网关注入边车时网关控制平面不重启应用配置的问题
- **修复** 网关列表中返回的边车注入状态与实际不符的问题
- **优化** 至网格模块最新 SDK 修复云原生微服务相关接口逻辑

## 2024-01-30

### v0.33.1

- **修复** Nacos 级联删除相关逻辑

## 2024-01-18

### v0.33.0

#### 新功能

- **新增** 网关支持自定义逻辑插件

#### 修复

- **修复** 网格类型网关服务列表查询异常的问题
- **修复** 网关 API 统计中的请求完成数不准确的问题
- **修复** 托管 Nacos 下 Seata 和 Sentinel 配置级联删除的问题
- **修复** 网关调试日志中的 Header Check 错误
- **修复** 部分逻辑由于滑动 TTL 引发的不能获取最新数据问题

#### 优化

- **优化** API 密码返回逻辑使用 Base64 编码，增强安全性
- **优化** 云原生网关边车注入实现，遵循 Gateway API 标准

## 2024-01-18

### v0.32.0

#### 新功能

- **新增** 云原生微服务监控资源
- **新增** 接入注册中心功支持开启认证模式的注册中心接入
- **新增** ARM 架构离线安装包发布流程

#### 修复

- **修复** 更新域名时会错误更新插件引用的逻辑
- **修复** 服务列表查询服务端口错误的问题
- **修复** 日志协议字段展示错误的问题
- **修复** 流量泳道的服务列表接口返回结果未排序的问题
- **修复** 流量泳道的服务列表中实例数量不正确的问题
- **修复** 云原生网关已经创建了命名空间刷新报错的问题
- **修复** 接入的 Kubernetes 集群中的实例状态与实际不符的问题
- **修复** 接入的网格中服务的实例列表结果有误的问题
- **修复** 网关中 Nodeport 类型的服务如果对应工作负载停止地址不正确的问题
- **修复** 接入注册中心中 Nacos 服务在非默认 Group 中展示异常的问题

#### 优化

- **优化** 应应用工作台要求优化路由权重总和大于零即可
- **优化** 网关 API 中服务的权重校验逻辑
- **优化** 集群接入地址变化引发的资源首次操作不正常问题

## 2024-01-03

### v0.31.2

- **修复** 网关 API 中缺少协议字段展示的问题
- **修复** 集群重新接入后地址变更导致的托管资源异常问题
- **修复** 网关针对异常访问统计不正确的问题
- **修复** 集群服务 NodePort 端口为 0 的问题
- **修复** 自动填充集群服务和网格服务的状态提示不准确的问题
- **修复** Init Chart 在 insight-system 命名空间不存在时安装异常的问题

## 2023-12-26

### v0.31.1

- **修复** 网关管理组件的日志文件缺失问题

## 2023-12-26

### v0.31.0

#### 新功能

- **新增** 对托管 Nacos 2.3.0 版本的支持
- **新增** 流量入口支持服务和 API 网关服务
- **新增** 离群实例检测
- **新增** 增强流量泳道拓扑的细节（流量指向，版本等）
- **新增** 网关运行时的堆内存高级配置

#### 修复

- **修复** 网关服务列表和服务详情中没有连接地址的问题
- **修复** 网关 API 更新后 label 缺失的问题
- **修复** 网关 API 路由规则重复的问题
- **修复** 网关运行时最大堆内存为空值的问题
- **修复** 托管 Nacos 集成网格服务时的接入服务问题
- **修复** 网关注入 Istio 边车注解不正确的问题
- **修复** 网关查询 Nacos 服务不正常的问题
- **修复** 流量泳道服务名过长导致无法创建引流规则的问题
- **修复** 网关更新服务端口异常的问题
- **修复** 创建托管资源时资源配额计算异常的问题
- **修复** 网关 API 列表添加根据域名筛选的逻辑问题
- **修复** 云原生微服务治理重复端口的问题
- **修复** 当 API 存在多路由时，请求头始终会进行判断，并且判断条件重复的问题
- **修复** HTTPS 域名的 API 测试异常报错问题
- **修复** 删除 Sentinel 功能时异常的问题
- **修复** 网关日志为空时导出日志导致组件重启的问题
- **修复** 托管 Nacos 资源信息接口返回的控制台地址为空的问题
- **修复** 托管 Nacos 名称为 -seata 后缀时开启 Seata 插件失败的问题
- **修复** 托管 Nacos 管理中间件 MySQL 查看权限的问题
- **修复** 网关接口 v1alpha2 版本的标签问题

#### 优化

- **优化** Skoala Agent 组件并添加日志功能
- **优化** 升级网关控制面（Contour）至 v1.27.0 私有分支版本
- **优化** 升级网关运行时（Envoy）至 v1.28.0 官方版本
- **优化** 升级网关依赖 Gateway API 自定义资源至 v1.0 正式版
- **优化** 调整网关日志查询索引（兼容之前版本）

## 2023-12-11

### v0.30.2

- **修复** 网关 API 多个重复路由记录的问题

## 2023-12-01

### v0.30.0

- **修复** 网关运行状态不正确的问题
- **修复** Nacos Operator 的状态检测问题
- **修复** 网格服务的边车状态检查问题
- **优化** 网关相关接口
- **优化** 网关日志的查询逻辑支持自定义字段的查询

## 2023-11-26

### v0.29.0

#### 新功能

- **新增** API 文档管理、API 查询
- **新增** 流量泳道灰度过程可视化，通过视图直接显示集群内部灰度泳道划分，数据流转情况

#### 修复

- **修复** 网格模式治理的网格实例列表逻辑
- **修复** 托管 Nacos 控制器的一些不同步问题

#### 优化

- **优化** 网关服务列表接口并新增访问地址回显功能
- **优化** 修改服务后同步更新接口的逻辑
- **优化** 网关资源列表的加载速度
- **优化** 网关超时设置的配置细节

## 2023-11-07

### v0.28.1

- **修复** 网关服务列表的排序问题
- **修复** 导入网关 API 的多个换行符问题
- **修复** Seata Operator 镜像不支持离线仓库问题
- **修复** 离线发布流程异常的问题

## 2023-10-26

### v0.28.0

#### 新功能

- **新增** 支持网关 API 请求头正则表达式匹配、精准匹配
- **新增** 支持网关 API 批量导入导出
- **新增** 支持托管 Nacos 多版本选择（目前支持 2.0.4、2.1.1、2.2.3 三个版本）
- **新增** 支持 sentinel 控制台密码复杂化
- **新增** 支持托管 Nacos 配置文件定向灰度发布
- **新增** 支持分布式事务（包括 TCC 模式、FMT 模式、SAGA 模式、XA 模式）
- **新增** 支持以 Swagger 标准通过可视化表单界面 导入接口。

#### 修复

- **修复** 托管 Nacos 不同版本支持的问题
- **修复** 网关接口列表请求方法重复的问题
- **修复** Zookeeper 接入注册中心无法接入 TLS 协议实例的问题
- **修复** 网关全局认证开启后域名删除和更新失败的问题
- **修复** 托管 Nacos 命名空间级别 CPU 使用率不正确的问题
- **修复** 托管 Nacos 从 NodePod 模式改为 ClusterIP 模式时 Service 变更不正常的问题
- **修复** Seata 接口验证不正常的问题
- **修复** 接入注册中心切换 Workspace 接入异常的问题
- **修复** 托管 Nacos 相关接口的权限问题
- **修复** 托管 Nacos Grafana 监控面板问题
- **修复** Sentinel Grafana 监控面板问题
- **修复** 整体权限的准确性问题

#### 优化

- **优化** 网关更新逻辑当网关中域名开启了 HTTPS 之后不允许关闭网关层面 HTTPS
- **优化** 审计日志的事件准确性
- **优化** 云原生微服务 WebAssembly 插件逻辑
- **优化** 概览页面的网关健康度查询逻辑（由 Rate 变更为 Increase）
- **优化** Swagger 路径在 URL 中去掉版本信息并支持多版本接口
- **优化** Skoala Init Helm Chart 支持分布式事务控制器（Seata Operator）
- **优化** Skoala Agent 证书
- **优化** 所有 Swagger 中接口描述与详情内容
- **优化** 审计日志格式及自动生成方案
- **优化** 当发布正式版本时，会将 Skoala Helm Chart 发布到正式版镜像仓库的 System 项目中

## 2023-09-01

### v0.27.2

- **修复** 前端更新至 0.18.1 版修复界面问题

### v0.27.1

#### 修复

- **修复** 批量删除时返回详情重复的问题
- **修复** 云原生微服务端口列表中插件信息不能排序的问题
- **修复** 流量泳道列表不正常展示的问题
- **修复** 前端组件的容器名称不统一的问题
- **修复** Sentinel 业务应用监控报表的一些错误

#### 优化

- **优化** 升级 Insight 版本为 0.19.2
- **优化** 升级 Ghippo 版本为 0.20.0

!!! note

    重要：微服务引擎版本大于 `v0.24.2` 版时，针对 `v0.24.2` 及之前版本存在不兼容更新，因为网关涉及开源组件仓库地址变更，
    所以更新前需要手动删除旧有的 `gateway-api-admission-xxxxx` Job，然后进行正常升级更新操作。

## 2023-08-25

### v0.27.0

#### 新功能

- **新增** 支持接入 Consul 注册中心
- **新增** 支持网关实例级别的安全认证配置
- **新增** 支持精确地控制整个集群的流量调用总量
- **新增** 流量泳道

#### 修复

- **修复** 网关服务接入时权限与预定义权限不符的问题
- **修复** 服务治理状态表达不正确的问题
- **修复** 托管 Nacos 配置灰度发布返回异常问题
- **修复** 托管 Nacos 中服务实例列表报错问题
- **修复** 流量泳道服务版本重复的问题
- **修复** 流量泳道中服务列表异常问题
- **修复** 流量泳道服务删除的问题
- **修复** 当错误原因未空时泳道列表空指针异常的问题
- **修复** Skoala-init Chart 表单模式配置不生效的问题

#### 优化

- **优化** 依要求将删除泳道服务从 delete 方法变为 put。
- **优化** 移除多余权限依赖并完善内部权限依赖关系
- **优化** 流量泳道适配界面展示需求
- **优化** 云原生微服务插件接口
- **优化** 添加泳道服务的方式由批量改为单个
- **优化** 前端组件 Deployment 端口由 80 修改为 8080
- **优化** 升级 Ghippo SDK 到 v0.20.0-dev2

!!! note

    重要：微服务引擎版本大于 `v0.24.2` 版时，针对 `v0.24.2` 及之前版本存在不兼容更新，因为网关涉及开源组件仓库地址变更，
    所以更新前需要手动删除旧有的 `gateway-api-admission-xxxxx` Job，然后进行正常升级更新操作。

## 2023-08-03

### v0.26.2

- **修复** `Consul` 注册中心接入时检测不通的问题
- **修复** 网关由于插件应用异常重启问题
- **修复** 网关验证插件配置异常问题
- **修复** `Sentinel` 集群流控规则编辑异常的问题

!!! note

    重要：微服务引擎版本大于 `v0.24.2` 版时，针对 `v0.24.2` 及之前版本存在不兼容更新，因为网关涉及开源组件仓库地址变更，
    所以更新前需要手动删除旧有的 `gateway-api-admission-xxxxx` Job，然后进行正常升级更新操作。

## 2023-07-26

### v0.26.1

- **修复** 修复 Agent 组件版本错误问题

## 2023-07-25

### v0.26.0

#### 新功能

- **新增** 支持给网关运行时 Envoy 注入 Istio Sidecar Envoy 代理
- **新增** 支持 API 级别的全局限流
- **新增** 支持域名级别的全局限流
- **新增** 支持 API 列表批量操作（上线/下线/删除）
- **新增** 支持云原生微服务治理通过插件方式扩展能力，包括：JWT 插件、Auth 插件、全局限流插件等
- **新增** 支持云原生微服务的服务信息详情及端口列表查看

#### 修复

- **修复** Nacos 端口修改不生效的问题
- **修复** Sentinel 集群流控规则保存不生效的问题
- **修复** 删除 Nacos 中非空服务时接口异常的问题
- **修复** 网关监控数据中重复数据的问题
- **修复** 云原生微服务使用插件相关 API 的问题
- **修复** 网关域名命名规则的相关问题
- **修复** 云原生微服务流量泳道的版本错误问题

#### 优化

- **优化** 人大金仓数据库的驱动名由 kb_v8r6 改为 kingbase

## 2023-07-19

### v0.25.0

#### 新功能

- **新增** 将网关运行时的网格注入标识修改被标签方式标记
- **新增** 与中间件关联操作的权限级联选择能力
- **新增** 云原生微服务限流规则详情 API
- **新增** 云原生微服务治理相关 API
- **新增** 为安装托管资源时集群就绪检查添加对应组件版本信息
- **新增** 为各类搜索 API 添加模糊搜索能力

#### 修复

- **修复** 流水线外部镜像扫描地址不对的问题
- **修复** 与中间件关联权限依赖未涵盖目录级别的问题

#### 优化

- **优化** 网关及相关资源变更的连锁校验
- **优化** 网关监听端口由集群 IP 改为容器端口

## 2023-07-06

### v0.24.2

- **修复** 页面体验优化及问题修复

## 2023-07-05

### v0.24.1

- **修复** Skoala-init Chart 表单中版本不是最新的问题
- **修复** 页面体验优化及问题

## 2023-06-30

### v0.24.0

- **新增** 云原生微服务插件相关 API
- **新增** 与中间件关联操作的权限级联选择能力
- **修复** Insight 集成数据异常的问题
- **修复** 网关状态筛选结果异常的问题
- **优化** 网关及相关资源变更的连锁校验

## 2023-06-26

### v0.23.0

#### 新功能

- **新增** 网关 API 的批量上下线接口
- **新增** 为引擎组件添加增强健康检查的配置
- **新增** 为缓存逻辑添加标签缓存支持
- **新增** 网关创建和更新时网格边车强制注入选项
- **新增** 网关列表按照状态筛选支持
- **新增** 审计日志集成
- **新增** 在持续集成中添加许可检查
- **新增** 将 Chart 中的敏感信息通过 Secret 存储
- **新增** 升级托管 Nacos 版本至 2.2.3 版
- **新增** Sentinel 版本至 0.10.5 版

#### 修复

- **修复** Insight 集成数据指标于原始数据对齐
- **修复** 与 mSpider 模块对接时未继承权限的问题
- **修复** Nacos 实例列表治理开启状态缺失的问题
- **修复** Sentinel 集群流控名称的问题
- **修复** 整体概览查询数据不是按照工作空间统计的问题
- **修复** 网关未开启 HTTPS 但域名可以开启 HTTPS 的问题
- **修复** Skoala-init Chart 表单数据默认值问题

#### 优化

- **优化** Sentinel Grafana 的使用体验和问题
- **优化** 托管资源告警逻辑只展示相关资源告警条目
- **优化** 重构全局管理模块配置结构
- **优化** 托管 Nacos 的信息读取通过 Clusterpedia 完成
- **优化** Insight 对接至 0.17.3 版
- **优化** 数据库中立相关配置的灵活性

## 2023-05-31

### v0.22.2

- **修复** Sentinel 集群流控 API 的问题
- **修复** Sentinel 规则模糊查询 API 的问题
- **优化** 连接数据库的默认值提高容错性

## 2023-05-29

### v0.22.1

- **修复** 插件 CRD 位置不对的问题
- **修复** OpenAPI 发布流程问题
- **优化** 为 Hive 组件的数据库配置设置默认值

## 2023-05-26

### v0.22.0

#### 新功能

- **新增** 托管 Nacos 2.2.x 版本的支持
- **新增** 网关链路功能支持
- **新增** 云原生微服务路径重写 API
- **新增** 云原生微服务超时 API
- **新增** 云原生微服务故障注入 API
- **新增** 云原生微服务重试等 API
- **新增** 云原生微服务使用 WASM 插件功能
- **新增** Skoala-init Chart 添加 JSON Schema
- **新增** OpenAPI 文档发布流程
- **新增** Hive 支持数据库中立

#### 修复

- **修复** 托管 Nacos 相关 API 有几率出现空指针的问题
- **修复** 托管 Nacos 端口展示不正确的问题
- **修复** Grafana 内的 HTTPProxy 拼写错误
- **修复** Nacos 数据库初始化 SQL 脚本问题
- **修复** 网关组件自定义权限对接问题
- **修复** 调用 Ghippo 空指针问题
- **修复** Nacos 服务元数据接口异常问题
- **修复** 更新域名的错误
- **修复** 调用 Kpanda API 频繁的问题
- **修复** 接入 Insight 获取数据不准确的问题
- **修复** WASM 插件查询出现错误
- **修复** 更新 API 路由服务后 API 出现错误
- **修复** Sentinel Token 服务器资源问题
- **修复** Zookeeper 链接未关闭问题

#### 优化

- **优化** Sentinel 监控面板结构和数据逻辑
- **优化** 网关域名管理中移除 virtualhost 自定义资源
- **优化** Sentinel 集群流控的 API 逻辑
- **优化** Ghippo 升级至 0.17.0-rc2
- **优化** 数据库初始化组件 sweet 已于 0.22.0 版废弃，将在 0.23.0 及之后版本彻底移除，从 0.22.0 版开始数据表将自动同步更新，无需人工干预

## 2023-05-07

### v0.21.2

- **修复** Sentinel 监控面板问题
- **修复** 网关被注入网格边车的问题
- **修复** 传统微服务开启网格治理的注册中心地址格式问题
- **修复** 托管注册中心选择中间件实例未按照集群筛选的问题
- **修复** 注册中心统计不正确的问题
- **优化** 更新网关组件到社区最新测试版

## 2023-04-26

### v0.21.1

- **修复** 云原生微服务分页问题
- **优化** 为 Nacos 添加禁用注入 Istio 边车的配置
- **优化** 升级 Insight 版本至 0.16.0 正式版
- **优化** 组件连接数据库重试机制
- **优化** 配合 Istio 治理能力修改 Nacos 的 9848 端口名为 GRPC

## 2023-04-25

### v0.21.0

#### 新功能

- **新增** 网关接入内部及外部地址分离展示
- **新增** 云原生微服务治理能力相关 API
- **新增** 告警消息列表 API
- **新增** 网关使用插件相关 API
- **新增** 网关各类插件的逻辑 API

#### 修复

- **修复** 网关更新时 Envoy 配置不更新的问题
- **修复** 网关只能添加单个端口的问题
- **修复** Insight 集成 JVM 查询的问题
- **修复** 云原生微服务治理 API 的问题
- **修复** Sentinel 规则无法存取的问题
- **修复** 链接不到数据库时某些 API 调用会造成程序崩溃的问题
- **修复** 资源状态 API 的问题
- **修复** 云原生微服务治理 API 时间单位问题
- **修复** 域名相关格式校验问题
- **修复** 插件一些字段命名错误的问题

#### 优化

- **优化** Insight 集成到 0.16.0
- **优化** 部署模板终端服务名称添加模块名前缀
- **优化** virtualhost crd
- **优化** httpproxy crd
- **优化** skoalaplugin crd

## 2023-04-21

### v0.20.0

#### 新功能

- **新增** Sentinel 门户版本
- **新增** 网关域名级别黑白名单支持
- **新增** 原生服务治理列表 API
- **新增** 原生服务治理编辑 API
- **新增** 可观测 JVM 监控集成
- **新增** 网关资源工作负载状态展示
- **新增** 网关负载策略选择配置

#### 修复

- **修复** Contour 镜像版本
- **修复** 自定义角色功能点及 API 映射
- **修复** 网关概览 API 排序和条目

#### 优化

- **优化** 插件中心相关 API
- **优化** 配置文件结构
- **优化** 配置参数由直接读取改为配置包实现
- **优化** 管理组件整体包结构
- **优化** 管理组件
- **优化** Contour 升级到 v1.24.3-ipfilter-tracing
- **优化** Envoy 升级到 v1.25.4

## 2023-04-10

### v0.19.4

- **修复** 托管 Nacos 的启动问题

## 2023-04-10

### v0.19.3

- **修复** 前端问题

## 2023-04-04

### v0.19.2

- **修复** Nacos 及 Sentinel 默认验证账号问题
- **修复** 概览网关 API 排序问题

## 2023-04-04

### v0.19.1

- **修复** CVE-2022-31045 漏洞
- **修复** 插件中心 API 问题
- **修复** 网关重启的问题
- **修复** 插件更新时版本不能成功更新的问题
- **修复** Nacos 及 Sentinel 默认验证账号问题
- **修复** 概览内微服务网关网关 API 排序问题
- **修复** Nacos 支持版本回滚至 2.0.4

## 2023-03-24

### v0.19.0

#### 新功能

- **新增** 自定义权限点及 API 的实现
- **新增** 注册中心概览相关 API
- **新增** 网关黑白名单相关 API
- **新增** 概览中网关健康度相关 API
- **新增** Nacos 支持版本至 2.1.2
- **新增** 获取 Nacos 及网关版本信息 API
- **新增** 概览中注册配置中心统计收集器
- **新增** 概览中注册配置中心统计 API
- **新增** 云原生微服务服务列表 API
- **新增** 云原生微服务服务导入相关 API
- **新增** 插件中心自定义资源设计
- **新增** 插件中心插件管理相关 API
- **新增** 网关前置流量拦截配置 API
- **新增** 级联资源操作添加事务 (类似) 机制处理包
- **新增** 资源重启功能

#### 修复

- **修复** Nacos Operator 中初始化 Nacos 的数据库脚本问题
- **修复** Sentinel 相关数据概览 API 的问题
- **修复** 网关相关数据的概览 API 的问题
- **修复** 网关生命周期管理减少网关异常重启问题
- **修复** 概览 API 路径大小写问题
- **修复** Nacos 2.1.2 无法创建集群的问题
- **修复** 网关前置流量拦截修改不生效的问题
- **修复** 网关黑白名单 API 的问题
- **修复** Nacos GRPC 端口名字对集成 Istio 产生的问题
- **修复** 每日构建中的外部镜像安全扫描

#### 优化

- **优化** CI 流程并简化不必要的任务
- **优化** 全部资源的更新操作都采用 retry 机制
- **优化** 网关相关功能重构

## 2023-02-25

### v0.18.0

- **新增** 添加注册中心配置中心分离 API
- **新增** 添加概览相关逻辑及 API
- **修复** gateway-api 镜像版本问题
- **修复** 负载均衡模式网关的 IP 池加载问题
- **修复** 健康检查相关问题

## 2023-02-22

### v0.17.1

#### 新功能

- **新增** 网关 NodePort 支持
- **新增** 网关 LoadBalancer 支持
- **新增** Sentinel 规则统计 API
- **新增** Sentinel 治理的服务列表 API
- **新增** 网关 API 的 Cookie 重写策略
- **新增** 概览数据定时任务
- **新增** 定时收集异常 Sentinel 任务
- **新增** Sentinel 集群流控详情 API
- **新增** 网关接入服务列表端口选择
- **新增** 网关服务健康检查策略
- **新增** 网关 API 中对健康策略的支持
- **新增** Sentinel 统计相关 API
- **新增** 支持 chart 离线化的 CI 流程
- **新增** 在每日构建中增加外部镜像安全扫描能力
- **新增** 发布自动更新 chart 中镜像版本

#### 修复

- **修复** Nacos Namespace 创建异常的问题
- **修复** Nacos 持久化存储修改异常的问题
- **修复** Nacos 生命周期管理资源校验问题
- **修复** 网关监控面板数据展示问题
- **修复** Ghippo 链接 GRPC 地址缺失问题
- **修复** Sentinel 获取集群流控 API 的问题
- **修复** 托管 Nacos 资源状态不更新的问题
- **修复** Sentinel 适配 Nacos public 字符串问题
- **修复** Sentinel 获取资源 API 没有聚合不同实例问题
- **修复** Sentinel 系统规则不生效问题
- **修复** 网关服务注册中心类型分页错误的问题
- **修复** 创建服务端口错误的问题
- **修复** 数据库初始化组建的问题
- **修复** 使用 Helm 命令替代 Argocd 部署 Alpha 环境
- **修复** 基础镜像 CVE 问题并升级至 3.17.2
- **修复** 发布过程 Chart 更新问题

#### 优化

- **优化** 升级 gateway-api 到 v0.6.0
- **优化** 待更新资源获取由 clusterpedia 改为 client-go
- **优化** Sentinel 应用监控模板
- **优化** 将离线 chart 构建 CI 步骤独立
- **优化** Contour 升级到 v1.24.1
- **优化** envoy 升级到 v1.25.1
- **优化** 通过 Chart 能力使 Skoala Init 安装时固定命名空间

## 2022-12-30

### v0.16.1

- **修复** 构建镜像时重复创建 builder 的问题
- **优化** Sentinel 应用监控面板细节

## 2022-12-29

### v0.16.0

- **修复** Sentinel 调用具备认证开启 Nacos 接口的问题
- **修复** nacos-operator 频繁修改服务资源的问题
- **优化** 添加 Sentinel 服务的 Grafana 监控面板
- **优化** 升级 Insight 为最新版本支持通过集群名查询监控数据

## 2022-12-28

### v0.15.2

#### 新功能

- **新增** 网关 API 对于认证服务器的支持
- **新增** 托管注册中心服务接入 API
- **新增** Sentinel 集群流控相关 API

#### 修复

- **修复** Sentinel 规则拼接错误的问题
- **修复** Sentinel 仪表盘名称的问题
- **修复** 管理组件 Chart 对于生产换环境的 Service IP 问题
- **修复** Nacos 控制器处理逻辑的问题
- **修复** 与集群管理集成的 egress 地址问题

#### 优化

- **优化** 托管 Nacos 监控仪表盘问题
- **优化** nacos-operator 数据库初始化的文件获取地址
- **优化** 更新 Sentinel 镜像至 v0.6.0

## 2022-12-22

### v0.14.0

#### 新功能

- **新增** Init Chart 所需镜像的离线支持
- **新增** 获取托管 Nacos 的令牌

#### 修复

- **修复** Skoala Chart 中 Values 命名问题
- **修复** CI 流程中的镜像问题

#### 优化

- **优化** 设置默认日志输出到控制台
- **优化** 升级 nacos-operator 到社区版本
- **优化** 更新 Nacos 自定义资源的认证开启支持
- **优化** 设置默认组件日志级别

## 2022-12-21

### v0.13.0

#### 新功能

- **新增** 对接中间件 MySQL 和 Redis 的相关 API
- **新增** 网关 JWT 验证支持的 API
- **新增** 网关域名校验逻辑
- **新增** Sentinel 资源列表 API
- **新增** 网关查询注册中心服务的接口
- **新增** 版本发布后推送 Init Chart 至 addon 仓库
- **新增** 版本发布时完成 gitlab release 操作
- **新增** 动态更改日志级别

#### 修复

- **修复** 全局限流规则更新时不生效的问题
- **修复** Envoy Log Level 未设置问题
- **修复** 更新网关时异常未判断的问题
- **修复** 托管 Nacos 的数据库初始化问题

#### 优化

- **优化** 注册中心列表按更新时间降序排列
- **优化** 统一网关 JWT 相关的字段名称
- **优化** 网关域名列表增加是否开启 JWT 的字段
- **优化** Sentinel 服务名连接符的逻辑
- **优化** 升级 Contour 到 1.23 版
- **优化** 升级 Envoy 到 1.24 版
- **优化** 升级 k8s.io/相关组件到 0.25 版
- **优化** 将 go-replayers 组件回归社区版本
- **优化** 将 go-helm-client 组件回归社区版本
- **优化** 升级 Contour 到 1.23.1 版
- **优化** 修改 Agent 组件为强制不注入网格边车
- **优化** 将 Nacos 镜像默认配置回归社区版本
- **优化** 移除 Nacos 镜像相关 CI 流程

## 2022-12-13

### v0.12.2

#### 新功能

- **新增** 添加 Sentinel 自身监控的 Grafana 模板支持
- **新增** 添加自定义配置网关索引的配置信息

#### 修复

- **修复**  微服务集成可观测组件的状态问题
- **修复** 注册中心开启网格插件能力的治理状态问题
- **修复** 网关日志索引问题
- **修复** 前置依赖检查接口的问题
- **修复** Sentinel 与 Nacos 默认命名空间匹配的逻辑问题
- **修复** 连接容器管理模块的端口异常情况的逻辑
