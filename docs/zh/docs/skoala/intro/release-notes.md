# 微服务引擎 Release Notes

本页列出微服务引擎的 Release Notes，便于您了解各版本的演进路径和特性变化。

## 2023-04-26

### V0.21.1

#### 修复

- **修复** 云原生微服务分页问题

#### 优化

- **优化** 为 Nacos 添加禁用注入 Istio 边车的配置
- **优化** 升级 Insight 版本至 0.16.0 正式版
- **优化** 组件连接数据库重试机制
- **优化** 配合 Istio 治理能力修改 Nacos 的 9848 端口名为 GRPC

## 2023-04-25

### V0.21.0

#### 新功能

- **新增** 网关接入内部及外部地址分离展示
- **新增** 云原生微服务治理能力相关 API
- **新增** 告警消息列表 API
- **新增** 网关使用插件相关 API
- **新增** 网关各类插件的逻辑 API

#### 修复

- **修复** 网关更新时 Envoy 配置不更新的问题
- **修复** 网关只能添加单个端口的问题
- **修复** Insight 集成 JVM 查询的问题
- **修复** 云原生微服务治理 API 的问题
- **修复** Sentinel 规则无法存取的问题
- **修复** 链接不到数据库时某些 API 调用会造成程序崩溃的问题
- **修复** 资源状态 API 的问题
- **修复** 云原生微服务治理 API 时间单位问题
- **修复** 域名相关格式校验问题
- **修复** 插件一些字段命名错误的问题

#### 优化

- **优化** Insight 集成到 0.16.0
- **优化** 部署模板终前端服务名称添加模块名前缀
- **优化** virtualhost crd
- **优化** httpproxy crd
- **优化** skoalaplugin crd

## 2023-04-21

### V0.20.0

#### 新功能

- **新增** Sentinel 门户版本
- **新增** 网关域名级别黑白名单支持
- **新增** 原生服务治理列表 API
- **新增** 原生服务治理编辑 API
- **新增** 可观测 JVM 监控集成
- **新增** 网关资源工作负载状态展示
- **新增** 网关负载策略选择配置

#### 修复

- **修复** Contour 镜像版本
- **修复** 自定义角色功能点及 API 映射
- **修复** 网关概览 API 排序和条目

#### 优化

- **优化** 插件中心相关 API
- **优化** 配置文件结构
- **优化** 配置参数由直接读取改为配置包实现
- **优化** 管理组件整体包结构
- **优化** 管理组件
- **优化** Contour 升级到 v1.24.3-ipfilter-tracing
- **优化** Envoy 升级到 v1.25.4

## 2023-04-10

### V0.19.4

#### 修复

- **修复** 托管 Nacos 的启动问题

## 2023-04-10

### V0.19.3

#### 修复

- **修复** 前端问题

## 2023-04-04

### V0.19.2

#### 修复

- **修复** Nacos 及 Sentinel 默认验证账号问题
- **修复** 概览网关 API 排序问题

## 2023-04-04

### v0.19.1

#### 修复

- **修复** CVE-2022-31045 漏洞
- **修复** 插件中心 API 问题
- **修复** 网关重启的问题
- **修复** 插件更新时版本不能成功更新的问题
- **修复** Nacos 及 Sentinel 默认验证账号问题
- **修复** 概览内微服务网关网关 API 排序问题
- **修复** Nacos 支持版本回滚至 2.0.4

## 2023-03-24

### v0.19.0

#### 新功能

- **新增** 自定义权限点及 API 的实现
- **新增** 注册中心概览相关 API
- **新增** 网关黑白名单相关 API
- **新增** 概览中网关健康度相关 API
- **新增** Nacos 支持版本至 2.1.2
- **新增** 获取 Nacos 及网关版本信息 API
- **新增** 概览中注册配置中心统计收集器
- **新增** 概览中注册配置中心统计 API
- **新增** 云原生微服务服务列表 API
- **新增** 云原生微服务服务导入相关 API
- **新增** 插件中心自定义资源设计
- **新增** 插件中心插件管理相关 API
- **新增** 网关前置流量拦截配置 API
- **新增** 级联资源操作添加事务 (类似) 机制处理包
- **新增** 资源重启功能

#### 修复

- **修复** Nacos Operator 中初始化 Nacos 的数据库脚本问题
- **修复** Sentinel 相关数据概览 API 的问题
- **修复** 网关相关数据的概览 API 的问题
- **修复** 网关生命周期管理减少网关异常重启问题
- **修复** 概览 API 路径大小写问题
- **修复** Nacos 2.1.2 无法创建集群的问题
- **修复** 网关前置流量拦截修改不生效的问题
- **修复** 网关黑白名单 API 的问题
- **修复** Nacos GRPC 端口名字对集成 Istio 产生的问题
- **修复** 每日构建中的外部镜像安全扫描

#### 优化

- **优化** CI 流程并简化不必要的任务
- **优化** 全部资源的更新操作都采用 retry 机制
- **优化** 网关相关功能重构

## 2023-02-25

### v0.18.0

#### 新功能

- **新增** 添加注册中心配置中心分离 API
- **新增** 添加概览相关逻辑及 API

#### 修复

- **修复** gateway-api 镜像版本问题
- **修复** 负载均衡模式网关的 IP 池加载问题
- **修复** 健康检查相关问题

## 2023-02-22

### v0.17.1

#### 新功能

**新增** 网关 NodePort 支持

- **新增** 网关 LoadBalancer 支持
- **新增** Sentinel 规则统计 API
- **新增** Sentinel 治理的服务列表 API
- **新增** 网关 API 的 Cookie 重写策略
- **新增** 概览数据定时任务
- **新增** 定时收集异常 Sentinel 任务
- **新增** Sentinel 集群流控详情 API
- **新增** 网关接入服务列表端口选择
- **新增** 网关服务健康检查策略
- **新增** 网关 API 中对健康策略的支持
- **新增** Sentinel 统计相关 API
- **新增** 支持 chart 离线化的 CI 流程
- **新增** 在每日构建中增加外部镜像安全扫描能力
- **新增** 发布自动更新 chart 中镜像版本

#### 修复

- **修复** Nacos Namespace 创建异常的问题
- **修复** Nacos 持久化存储修改异常的问题
- **修复** Nacos 生命周期管理资源校验问题
- **修复** 网关监控面板数据展示问题
- **修复** Ghippo 链接 GRPC 地址缺失问题
- **修复** Sentinel 获取集群流控 API 的问题
- **修复** 托管 Nacos 资源状态不更新的问题
- **修复** Sentinel 适配 Nacos public 字符串问题
- **修复** Sentinel 获取资源 API 没有聚合不同实例问题
- **修复** Sentinel 系统规则不生效问题
- **修复** 网关服务注册中心类型分页错误的问题
- **修复** 创建服务端口错误的问题
- **修复** 数据库初始化组建的问题
- **修复** 使用 Helm 命令替代 Argocd 部署 Alpha 环境
- **修复** 基础镜像 CVE 问题并升级至 3.17.2
- **修复** 发布过程 Chart 更新问题

#### 优化

- **优化** 升级 gateway-api 到 v0.6.0
- **优化** 待更新资源获取由 clusterpedia 改为 client-go
- **优化** Sentinel 应用监控模版
- **优化** 将离线 chart 构建 CI 步骤独立
- **优化** Contour 升级到 v1.24.1
- **优化** envoy 升级到 v1.25.1
- **优化** 通过 Chart 能力使 Skoala Init 安装时固定命名空间

## 2022-12-30

### v0.16.1

#### 修复

- **修复** 构建镜像时重复创建 builder 的问题

#### 优化

- **优化** Sentinel 应用监控面板细节

## 2022-12-29

### v0.16.0

#### 修复

- **修复** Sentinel 调用具备认证开启 Nacos 接口的问题
- **修复** nacos-operator 频繁修改服务资源的问题

#### 优化

- **优化** 添加 Sentinel 服务的 Grafana 监控面板
- **优化** 升级 Insight 为最新版本支持通过集群名查询监控数据

## 2022-12-28

### v0.15.2

#### 新功能

- **新增** 网关 API 对于认证服务器的支持
- **新增** 托管注册中心服务接入 API
- **新增** Sentinel 集群流控相关 API

#### 修复

- **修复** Sentinel 规则拼接错误的问题
- **修复** Sentinel 仪表盘名称的问题
- **修复** 管理组件 Chart 对于生产换环境的 Service IP 问题
- **修复** Nacos 控制器处理逻辑的问题
- **修复** 与集群管理集成的 egress 地址问题

#### 优化

- **优化** 托管 Nacos 监控仪表盘问题
- **优化** nacos-operator 数据库初始化的文件获取地址
- **优化** 更新 Sentinel 镜像至 v0.6.0

## 2022-12-22

### v0.14.0

#### 新功能

- **新增** Init Chart 所需镜像的离线支持
- **新增** 获取托管 Nacos 的令牌

#### 修复

- **修复** Skoala Chart 中 Values 命名问题
- **修复** CI 流程中的镜像问题

#### 优化

- **优化** 设置默认日志输出到控制台
- **优化** 升级 nacos-operator 到社区版本
- **优化** 更新 Nacos 自定义资源的认证开启支持
- **优化** 设置默认组件日志级别

## 2022-12-21

### v0.13.0

#### 新功能

- **新增** 对接中间件 MySQL 和 Redis 的相关 API
- **新增** 网关 JWT 验证支持的 API
- **新增** 网关域名校验逻辑
- **新增** Sentinel 资源列表 API
- **新增** 网关查询注册中心服务的接口
- **新增** 版本发布后推送 Init Chart 至 addon 仓库
- **新增** 版本发布时完成 gitlab release 操作
- **新增** 动态更改日志级别

#### 修复

- **修复** 全局限流规则更新时不生效的问题
- **修复** Envoy Log Level 未设置问题
- **修复** 更新网关时异常未判断的问题
- **修复** 托管 Nacos 的数据库初始化问题

#### 优化

- **优化** 注册中心列表按更新时间降序排列
- **优化** 统一网关 JWT 相关的字段名称
- **优化** 网关域名列表增加是否开启 JWT 的字段
- **优化** Sentinel 服务名连接符的逻辑
- **优化** 升级 Contour 到 1.23 版
- **优化** 升级 Envoy 到 1.24 版
- **优化** 升级 k8s.io/相关组件到 0.25 版
- **优化** 将 go-replayers 组件回归社区版本
- **优化** 将 go-helm-client 组件回归社区版本
- **优化** 升级 Contour 到 1.23.1 版
- **优化** 修改 Agent 组件为强制不注入网格边车
- **优化** 将 Nacos 镜像默认配置回归社区版本
- **优化** 移除 Nacos 镜像相关 CI 流程

## 2022-12-13

### v0.12.2

#### 新功能

- **新增** 添加 Sentinel 自身监控的 Grafana 模板支持
- **新增** 添加自定义配置网关索引的配置信息

#### 修复

- **修复**  微服务集成可观测组件的状态问题
- **修复** 注册中心开启网格插件能力的治理状态问题
- **修复** 网关日志索引问题
- **修复** 前置依赖检查接口的问题
- **修复** Sentinel 与 Nacos 默认命名空间匹配的逻辑问题
- **修复** 连接容器管理模块的端口异常情况的逻辑
