# DCE 5.0-20230630 商业版正式发布

本页说明了 DCE 5.0-20230630 商业版包含的最新特性、优化、缺陷修复等。
DCE 5.0 每个产品模块都是独立解耦的，本次发布中所涉及的产品模块为 DCE 5.0 安装器默认包含的版本。
如需独立升级或替换各个模块，请联系 Daocloud 售后支持人员下载对应版本并升级。
另请参阅[商业版部署要求](../../install/commercial/deploy-requirements.md)。

**功能模块版本**

| 模块                 | 版本                                                              | 适配的 K8s 版本 |
| :------------------- | :---------------------------------------------------------------- | :-------------- |
| 安装器               | [v0.9.0](../../install/release-notes.md#v090)                     | K8s 1.23 - 1.25 |
| 全局管理             | [v0.18.0](../../ghippo/intro/release-notes.md#v0180)              | K8s 1.23 - 1.25 |
| 集群全生命周期管理   | [v0.7.0](https://github.com/kubean-io/kubean/releases/tag/v0.7.0) | K8s 1.23 - 1.25 |
| 容器管理             | [v0.19.0](../../kpanda/intro/release-notes.md#v0190)              | K8s 1.18 - 1.25 |
| 网络                 | [v0.8.0](../../network/modules/spiderpool/releasenotes.md#v080)   | K8s 1.18 - 1.25 |
| Hwameistor           | [v0.10.4](../../storage/hwameistor/releasenotes.md#v0103)         | K8s 1.18 - 1.25 |
| 可观测性             | [v0.18.2](../../insight/intro/releasenote.md#v0180)               | K8s 1.19 - 1.27 |
| 应用工作台           | [v0.18.1](../../amamba/intro/release-notes.md#v0181)              | K8s 1.23 - 1.25  |
| 多云编排             | [v0.10.3](../../kairship/intro/release-notes.md#v0103)            | K8s 1.18 - 1.25 |
| 微服务引擎           | [v0.23.0](../../skoala/intro/release-notes.md#v0230)              | K8s 1.23 - 1.25  |
| 服务网格             | [v0.17.0](../../mspider/intro/release-notes.md#v0170)             | K8s 1.21 - 1.25 |
| 中间件 RabbitMQ      | [v0.11.0](../../middleware/rabbitmq/release-notes.md#v0110)       | K8s 1.23 - 1.25 |
| 中间件 MySQL         | [v0.10.0](../../middleware/mysql/release-notes.md#v0100)          | K8s 1.23 - 1.25 |
| 中间件 ElasticSearch | [v0.9.0](../../middleware/elasticsearch/release-notes.md#v090)    | K8s 1.23 - 1.25 |
| 中间件 Redis         | [v0.9.0](../../middleware/redis/release-notes.md#v090)            | K8s 1.23 - 1.25 |
| 中间件 MinIO         | [v0.7.0](../../middleware/minio/release-notes.md#v070)            | K8s 1.23 - 1.25 |
| 中间件 PostgreSQL    | [v0.3.0](../../middleware/postgresql/release-notes.md#v030)       | K8s 1.23 - 1.25 |
| 中间件 Kafka         | [v0.7.0](../../middleware/kafka/release-notes.md#v070)            | K8s 1.23 - 1.25 |
| 镜像仓库             | [v0.9.0](../../kangaroo/release-notes.md#v09)                     | K8s 1.23 - 1.25 |

## 新功能和优化

详细的特性说明已体现在上表各版本的 Release Notes 中，这里简要说明一些新增的特性和优化。

### 安装器 v0.9.0

- **新增** 可修改 clusterConfig.yaml 配置暴露 火种 kind 地址及端口
- **新增** 安装器内置默认 k8s 版本升级到 v1.26.5
- **优化** 优化安装器 import-artifact 命令逻辑和功能
- **修复** 修复外接 http 的 Harbor 仓库同步镜像失败问题
- **修复** 修复 ES 组件无法在 OCP 启动的问题
- **修复** 修复中间件数据库在 arm64 环境高概率新建数据库失败的问题

### 可观测性 v0.18.2

- **新增** 日志告警
- **新增** 采集管理增加集群状态
- **新增** 静默规则列表增加静默条件
- **新增** 邮箱配置检测
- **新增** 支持 PostgreSQL 和 Kingbase 作为系统数据库
- **新增** Nvidia GPU 监控仪表盘
- **优化** 更新服务拓扑的图例
- **优化** 服务详情操作指标增加指标平均值并支持排序
- **优化** 链路查询支持 Span、延时、发生时间等排序
- **优化** 告警策略配置通知时下拉框增加搜索
- **优化** 告警模板支持格式化时区
- **优化** 升级 opentelemetry collector 的 Chart 版本从 v0.50.1 到 v0.59.3
- **优化** 升级 opentelemetry Operator 的 Chart 版本从 v0.26.1 到 v0.30.1
- **修复** 告警静默预览匹配告警时预览和实际生效静默的告警不相同的问题
- **修复** 系统组件中组件版本错误的问题
- **修复** 仪表盘中列表标题错误
- **修复** 通过告警列表创建静默，预览匹配告警数据无返回
- **修复** 部分环境中 Fluentbit 第一次无法启动的问题微服务引擎

### 微服务引擎 v0.24.1

- **新增** 为引擎组件添加增强健康检查的配置
- **新增** 为缓存逻辑添加标签缓存支持
- **新增** 审计日志集成
- **新增** 在持续集成中添加许可检查
- **新增** 将 Chart 中的敏感信息通过 Secret 存储
- **新增** 升级托管 Nacos 版本至 2.2.3 版
- **新增** Sentinel 版本至 0.10.5 版

### 服务网格 v0.17.0

- **新增** 审计日志能力
- **新增** 工作负载注入策略清除能力
- **新增** `MCPC Controller` 实现纳管服务自动注入能力
- **新增** K8s 各版本兼容性测试
- **优化** 网格创建时对托管集群检测加强，避免创建冲突网格

### 多云编排 v0.10.3

- **新增** 多云审计日志
- **新增** 资源新增分发状态展示
- **新增** Service 支持 LoadBalancer 类型

### 容器管理 v0.19.0

- **新增** 兼容 openAnolis / oracle linux 操作系统部署工作集群
- **新增** 离线环境创建集群支持自动添加 jfrog 的认证信息
- **新增** 创建工作负载新增环境变量规则校验
- **新增** 新增边缘负载和服务
- **新增** 新增双栈、系统内核作为节点前置检查项
- **新增** 创建工作负载新增 secretKey/configmapKey 作为配置项挂在在容器内
- **优化** 优化 Helm 仓库刷新机制
- **优化** 部分 I8N 英文翻译界面
- **修复** 在创建集群时，填写自定义参数，如果 value 为 0 或者 1，会被错误转换为 true 或者 false 的问题
- **修复** 修复在离线环境创建集群时，无法写入 containerd 账号密码配置的问题
- **修复** 修复对 1.26 及以上版本的集群进行升级时，由于 kubernetes 镜像仓库更改的原因，导致集群升级失败的问题
- **修复** 修复命名空间级用户无法使用 StorageClasses 创建 PV 相关问题
- **修复** 修复创建路由时指定命名空间不生效的问题
- **修复** 修复集群升级后，日期返回错误问题

### 集群生命周期管理 kubean v0.7.0

- **修复** 制作精简镜像包 python 无法启动的问题

### 应用工作台 v0.18.1

- **新增** 支持对原生应用及其子资源的更新与删除
- **新增** 支持 OAM 应用的创建、详情等基础功能
- **新增** 流水线权限支持了运行流水线权限点
- **修复** 目标集群没有安装原生应用的 CRD 时，原生应用列表页会报错

### 数据服务（中间件）

- **新增** 支持 MongoDB 的实例生命周期管理
- **新增** 支持 Elasticsearch 的反亲和性设置
- **新增** 支持 Redis 的监控采样时间间隔设置
- **新增** 支持 kafka 的监控采样时间间隔设置
- **新增** 支持 RabbitMQ 的负载均衡访问设置
- **新增** 支持 kafka 的负载均衡访问设置
- **优化** 优化中间件监控界面
- **优化** 优化 PVC 监控数据中立
- **优化** 优化可观测组件安装过程闭环
- **优化** 优化 Redis 纳管模式下更新配置的提示信息
- **优化** 优化备份页面结构
- **修复** 修复自定义角色中平台角色缺少工作空间权限关联的问题
- **修复** 修复 Redis 自动备份实际执行时间与配置时间相差 8 小事的问题

### 镜像仓库 v0.9.0

- **新增** 支持通过 UI 上传和下载 tar 包
- **新增** 支持审计镜像仓库重点操作
- **新增** 创建托管 harbor 支持使用中间件 `PostgreSQL`
- **修复** 修复 `Sidecar` 注入问题
- **修复** 修复镜像空间与工作空间的解绑问题

### 全局管理 v0.18.0

- **新增** 移动工作空间
- **新增** 接入管理 - Webhook（创建/编辑/删除/列表/查看）
- **新增** License 过期前提醒（提前 15 天）
- **新增** License 过期后功能不可用（可配置过期后是否可用）
- **新增** 用户在修改密码时需要输入旧密码
- **新增** 资源组支持绑定服务网格资源
- **新增** 支持外接 Postgres 数据库
- **新增** 运营管理 - 报表支持更多类型的货币
- **新增** istio-ingressgateway 和 istiod 支持高可用

## 升级注意事项

- 可观测性：当 **insight agent** 从 v0.16.x（或更低版本）升级到 v0.17.x 时，
  由于 kube-prometheus-stack chart 版本从 41.9.1 升级至 45.28.1，其中使用的 CRD 存在部分字段的升级，
  需要手动进行更新，请参考 [Insight 升级注意事项](../../insight/quickstart/install/upgrade-note.md)。

- 微服务引擎：数据库初始化组件 sweet 已于 0.22.0 版废弃，将在 0.23.0 及之后版本彻底移除，
  从 0.22.0 版开始数据表将自动同步更新，无需人工干预。

- 全局管理：当从 v0.15.x (或更低版本) 升级到 v0.17.0 (或更高版本) 时，数据库连接 helm 参数格式需要修改，
  详情参照[离线升级全局管理](../../ghippo/install/offline-install.md)。

## 兼容性

!!! note

    全局管理：一旦将全局管理升级到 v0.17.0 或 v0.16.0 及以上版本，必须将其他模块必须升级到相应版本，否则界面无法正常访问！**

| 全局管理 v0.17.0 支持的模块版本    | 全局管理 v0.16.0 支持的模块版本    |
| :--------------------------------- | :--------------------------------- |
| 容器管理 v0.18.1 及更高            | 容器管理 v0.17.0 及更高            |
| 可观测性 v0.17.2 及更高            | 可观测性 v0.16.0 及更高            |
| 应用工作台 v0.17.3 及更高          | 应用工作台 v0.16.0 及更高          |
| 多云编排 v0.9.1 及更高             | 多云编排 v0.8.0 及更高             |
| 微服务引擎 v0.22.0 及更高          | 微服务引擎 v0.21.1 及更高          |
| 服务网格 v0.16.2 及更高            | 服务网格 v0.15.0 及更高            |
| 中间件 RabbitMQ v0.11.0 及更高     | 中间件 RabbitMQ v0.10.1 及更高     |
| 中间件 MySQL v0.9.0 及更高         | 中间件 MySQL v0.8.1 及更高         |
| 中间件 ElasticSearch v0.8.0 及更高 | 中间件 ElasticSearch v0.7.1 及更高 |
| 中间件 Redis v0.8.0 及更高         | 中间件 Redis v0.7.1 及更高         |
| 中间件 MinIO v0.6.0 及更高         | 中间件 MinIO v0.5.1 及更高         |
| 中间件 Kafka v0.6.0 及更高         | 中间件 Kafka v0.5.1 及更高         |
| 中间件 PostgreSQL v0.2.0 及更高    | 中间件 PostgreSQL v0.1.0 及更高    |
| 镜像仓库 v0.8.0 及更高             | 镜像仓库 v0.7.0 及更高             |

## 安装

- [DCE 5.0 商业版本安装](../../install/commercial/deploy-arch.md)
- [DCE 5.0 社区版本安装](../../install/community/resources.md)

## 下载站

- [DCE 5.0 下载站](../../download/index.md)
