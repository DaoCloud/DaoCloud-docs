---
hide:
  - toc
---

# 流量治理

流量治理为用户提供了三种资源配置，虚拟服务、目标规则、网关规则。
通过配置相应规则可以实现路由、重定向、离群检测、分流等多项流量治理功能。用户可以通过向导或YAML形式创建、编辑治理策略。

- 虚拟服务主要用于对请求流量的路由定制规则，并可以对数据流做出分流、重定向、超时返回等处理
- 目标规则则更关注流量本身的治理，为请求流量提供更强大的负载均衡、连接存活探寻、离群检测等功能
- 网关规则为 Istio 网关提供服务在网关的暴露方式

在实际运用中，需要三类策略配合使用：

- 由虚拟服务来定义路由规则和描述满足条件的请求去哪里
- 目标规则则是定义子集和策略，描述到达目标的请求该怎么处理
- 如果有外部服务通信需求，则需要配置网关规则中的端口映射等细节来实现需求

在服务网格中，为用户提供了向导和 YAML 两种创建/编辑形式，用户可以根据个人习惯自由选择。

- 向导创建方式为用户提供简单直观的互动方式，一定程度上降低了用户的学习成本
- YAML 创建形式更适合资深用户，用户可以直接编写YAML文件创建治理策略，并且创建窗口中也为用户提供了较为常用的治理策略模板，提高用户编写速度
