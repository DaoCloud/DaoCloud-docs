# 全局管理 Release Notes

本页列出全局管理各版本的 Release Notes，便于您了解各版本的演进路径和特性变化。

## 2024-5-31

### v0.27.0

### 功能

- **新增** 平台设置中的登录页背景视频开关
- **新增** 个人中心中 查看/增加/更新/删除 ssh 证书信息 功能
- **新增** 创建用户和修改密码：用户名密码作为参数传给API时支持加密
- **新增** Mysql 的 MGR 模式

### 优化

- **优化** Keycloak 组件至 22.0.4

### 修复

- **修复** License 按照 GPU 授权后 GPU 数量统计值问题

## 2024-4-30

### v0.26.0

### 功能

- **新增** 支持 license 按照 GPU 授权
- **新增** 审计日志添加汇总链接

### 优化

- **优化** 审计日志 SDK 单元测试

### 修复

- **修复** 审计日志 user-agent 字段错误问题
- **修复** 审计日志登录记录经常一条失败一条成功的问题
- **修复** __运营管理__ 修改计费配置后点击取消，校验提示未去除问题
- **修复** __运营管理__ 容器组报表 GPU 计费时长计算问题

## 2024-4-1

### v0.25.1

### 修复

- **修复** 工作空间资源组绑定命名空间资源配额检查问题

## 2024-3-31

### v0.25.0

### 功能

- **新增** 一级导航栏可配置成根据权限显示
- **新增** Workspace/Folder Editor 不支持修改 工作空间/层级 名称
- **新增** Ghippo 支持 ARM 离线安装包
- **新增** SDK 提供一个根据 Workspace ID 查找 Alias 的方法 GetWorkspaceById()
- **新增** __运营管理__ 报表管理 -> 容器组报表 增加 GPU 统计指标
- **新增** __运营管理__ 计量计费 -> 容器组计费 增加 GPU 计费

### 修复

- **修复** 全局管理登录前端 css 报错问题
- **修复** 可观测性界面 Refresh Token API 可能无法更新 Token 的问题

## 2024-1-31

### v0.24.0

#### 功能

- **新增** 资源配额支持限制 GPU
- **新增** 支持 DCE 5.0 的登陆用户才能打开 Insight 的 Grafana 等组件的界面

#### 优化

- **优化** 触发 FoldersAuthz CR 时用 single flight 机制来限流
- **优化** 过滤掉重复授权的情况
- **优化** Workspace 授权信息不存到 FoldersAuthz CR 里
- **优化** ghippo-controller-manager 重启时全量更新一次 FoldersAuthz CR

#### 修复

- **修复** 大量授权请求导致 FoldersAuthz CR 更新过于频繁把 k8s 打爆问题

## 2023-12-29

### v0.23.0

#### 功能

- **新增** DCE 5.0 退出时对应的身份提供商页面也要自动登出功能
- **新增** 用户名支持下划线等特殊字符功能
- **新增** 带特殊字符的用户名禁止授权功能废除
- **新增** Folder 之间用户隔离模式
- **新增** 支持 Folder/Workspace 用户授权多个角色

#### 优化

- **优化** 初始化的用户名密码（admin/changeme）需要从 ConfigMap 里改存到 Secret 里

#### 修复

- **修复** 离线环境文档站跳转问题
- **修复** 安装器 0.13 版本升级失败问题
- **修复** 工作空间大规模测试性能问题

## 2023-12-05

### v0.22.1

#### 修复

- **修复** 导航栏中间件显示不全问题

## 2023-11-30

### v0.22.0

#### 功能

- **新增** 自动展开 active 导航栏
- **新增** 用户名支持下划线 SDK
- **新增** DCE 4.0 迁移到 DCE 5.0 方案验证支持
- **新增** __运营管理__ 添加列表精准搜索

#### 优化

- **优化** 关于平台：产品版本子模块 kcoral、dowl、kcollie、virtnest 支持中文

#### 修复

- **修复** 同步过来的 ldap 用户添加用户组失败问题
- **修复** 运营管理中工作空间报表展示不全的问题

## 2023-11-01

### v0.21.0

#### 功能

- **新增** 对接多个 AD/LDAP 功能
- **新增** 对接多个 OIDC 功能
- **新增** 区分用户来源于哪个 LDAP/OIDC 功能
- **新增** 权限依赖项不允许取消功能
- **新增** 后端定制一级导航栏功能
- **新增** 支持非中文语言下跳转至英文文档站

#### 优化

- **优化** 界面无端报错 400 问题
- **优化** 运营管理中的报表空数据展示
- **优化** 运营管理中的集群计费列表节点数量跳转至节点计费列表的功能

#### 修复

- **修复** Ghippo APIServer 启动时可能会死锁的问题
- **修复** 运营管理中的集群计费计算费用错误的问题

## 2023-09-04

### v0.20.1

#### 修复

- **修复** 界面无端报错 400 问题

## 2023-08-30

### v0.20.0

#### 功能

- **新增** 对接企业微信功能
- **新增** 密码支持 8-32 位
- **新增** 支持云边协同 Kant 对接 license
- **新增** 运营管理模块支持 postgres/kingbase 数据库

#### 优化

- **优化** 给部分没有主键的数据库表加上主键

## 2023-07-28

### v0.19.0

#### 功能

- **新增** 支持对接项目组 IDP 登录免点击
- **新增** 资源组绑定 mesh / mesh-namespace
- **新增** 自定义角色权限点增加 tips
- **新增** 平台设置 -> 安全策略 -> 对单个用户的多重并发会话进行限制
- **新增** 平台设置 -> 安全策略 -> 能够对系统的最大并发会话连接数进行限制

#### 优化

- **优化** Webhook URL 支持自定义参数

#### 修复

- **修复** 填写邮件服务器时报错问题
- **修复** LDAP 用户加入用户组失败问题

## 2023-07-06

### v0.18.1

#### 修复

- **修复** 工作空间集群名称可能为空的问题
- **修复** Folder Admin 角色工作空间授权列表权限问题
- **修复** Ghippo 0.17 升级到 0.18 失败的问题
- **修复** 新增共享资源，选择集群类型 options 都相同的问题
- **修复** 资源组列表，网格类型资源不能解绑

## 2023-06-29

### v0.18.0

#### 功能

- **新增** 移动工作空间
- **新增** 接入管理支持 Webhook（创建/编辑/删除/列表/查看）
- **新增** 接入管理支持 Webhook 记录后台自动清理
- **新增** License 过期前提醒
- **新增** License 过期后功能不可用
- **新增** 用户在修改密码时需要输入旧密码
- **新增** 资源组支持绑定服务网格资源
- **新增** 支持外接 Postgres 数据库
- **新增** 运营管理报表支持更多类型的货币
- **新增** Istio-ingressgateway 和 Istiod 支持高可用

#### 优化

- **优化** 后台配置的密码存入 secret

#### 修复

- **修复** 审计日志时区问题
- **修复** 工作空间授权时角色列表不能显示问题

### 功能

- **新增** 移动工作空间
- **新增** License 过期前提醒
- **新增** License 过期后功能不可用
- **新增** Webhook 记录后台清理功能
- **新增** 用户在修改密码时需要输入旧密码
- **新增** 支持外接 kingbase 数据库
- **新增** 运营管理报表支持更多类型的货币
- **新增** istio-ingressgateway 和 istiod 支持高可用

### 优化

- **优化** 后台配置的密码存入 secret

### 修复

- **修复** 审计日志时区问题

## 2023-06-02

### v0.17.1

#### 修复

- **修复** 迁移文件错误导致迁移失败的问题
- **修复** 创建工作空间时，角色只能选择 Workspace Admin 的问题

## 2023-05-30

### v0.17.0

#### 功能

- **新增** 接入管理中接入客户端（创建/查看/列表/更新/删除）功能
- **新增** 接入管理中 Webhook API（创建/编辑/删除/列表/查看）功能
- **新增** 用户 CRUD/Login/Logout 事件触发 Webhook
- **新增** 接入管理权限点
- **新增** 用户名/用户组名支持 `.` 和 `@`
- **新增** 平台默认语言改成 自动检测浏览器首选项
- **新增** 审计日志支持下载为 Excel 和 CSV 格式
- **新增** 两种日志（系统和用户）在审计日志中分开显示
- **新增** 禁止移除 admin 用户的 admin 角色或编辑 admin 的权限
- **新增** 工作空间授权展示角色的权限详情
- **新增** 单元测试的覆盖率，只能够上升，不能够下降
- **新增** OpenAPI 支持版本，OpenAPI 文档支持弃用（其他 GProduct 模块必须同步更新到安装器 v0.8.0 里对应的版本）
- **新增** 运营管理：GMagpie 使用数据库配置规范（Helm 参数、DSN）对接安装器
- **新增** 运营管理中 Excel 和 CSV 为支持下载格式
- **新增** 运营管理 Workspace 报表
- **新增** 运营管理 Workspace 计费报表
- **新增** 运营管理容器组报表
- **新增** 运营管理容器组计费报表
- **新增** 运营管理 Namespace 计费报表

#### 优化

- **优化** 角色列表默认排序
- **优化** 修改 Workspace Editor 权限点

#### 修复

- **修复** LDAP 同步用户组的同步时间问题

## 2023-04-28

### v0.16.1

#### 修复

- **修复** 死循环导致的 CPU 占用过高问题
- **修复** 审计日志导出不全的问题

## 2023-04-27

### v0.16.0

#### 功能

- **新增** LDAP 支持 AD
- **新增** LDAP 支持更多参数
- **新增** 支持修改登录页背景图
- **新增** 支持首页和登录页下方备案信息修改 (更新/展示)
- **新增** 数据库连接 Helm 参数格式修改
- **新增** 接入管理：接入客户端 API（创建/查看/列表/更新/删除）
- **新增** 反代 URL 支持前面加 Path
- **新增** 审计日志 SDK 直接调用 AuditServer API
- **新增** 审计日志用户和系统两种审计分表存，分 API 存取
- **新增** 去除 API Server 访问外网的依赖

#### 优化

- **优化** 创建自定义角色时，过滤不存在的权限
- **优化** 简化审计日志数据库分区功能

#### 修复

- **修复** 自定义角色类型显示错误问题

## 2023-03-29

### v0.15.0

#### 功能

- **新增** 自定义角色功能(创建/编辑/删除/查看/列表)
- **新增** 支持 GProduct 权限点及自定义角色功能对接
- **新增** 失联集群资源处理
- **新增** Ghippo OpenAPI 文档实现
- **新增** 给 GProduct 提供插入审计日志 SDK

#### 修复

- **修复** 密钥过期后 token 依旧可以使用的问题
- **修复** 镜像仓库不受 license 控制问题

## 2023-02-27

### v0.14.0

#### 功能

- **新增** 平台设置 -> 外观定制 -> 高级定制 -> 登录页定制及登录后页面定制
- **新增** 支持 keycloak quarkus 架构在双栈环境运行
- **新增** CI 过程中加入 Job 检测 Helm chart 包中是否有不合规的镜像和检测安装参数是否正确
- **新增** 在 Helm values 里设置开关, 可以一键开关 audit 相关功能
- **新增** 审计日志支持记录 kpanda 页面操作

#### 优化

- **优化** OpenAPI 调用方式

#### 修复

- **修复** 部分错误的审计日志名称
- **修复** keycloak 启动探针 failureThreshold 值，提高启动成功率
- **修复** 绑定/解绑资源错误 i18n

## 2022-12-30

### v0.13.2

#### 修复

- **修复** 界面缺少权限说明的英文文案
- **修复** 数据库表更新时，可能因为数据库编码导致报错的问题

## 2022-12-28

### v0.13.0

#### 功能

- **新增** DCE 5.0 一个国密网关, 并用国密浏览器来访问 DCE 5.0
- **新增** Helm values 里的开关, 可以一键开关 Istio Sidecar 功能
- **新增** 工作空间与层级中 Workspace and Folder Owner 角色
- **新增** 拥有 Workspace/Folder Admin 和 Kpanda Owner 权限的用户才可进行资源绑定的设置
- **新增** 对所用的库，进行开源 License 扫描
- **新增** 用户列表 __状态__ 列
- **新增** 对内提供的离线安装文档
- **新增** SDK 单元测试达 65%
- **新增** 界面支持发送测试邮件和无账号密码邮件服务器
- **新增** 界面支持对不符合系统要求的用户名进行提示

#### 优化

- **优化** Ghippo 鉴权代码优化（减少内存使用量）
- **优化** 前端界面低网络情况下预加载机制优化

#### 修复

- **修复** OpenAPI cycle 为必填参数问题，修复后为可选参数

## 2022-11-30

### v0.12.1

#### 优化

- **优化** 通过 CI 自动构建纯离线包
- **优化** Ghippo 升级文档

## 2022-11-28

### v0.12.0

#### 功能

- **新增** 资源组里的 __模块__ 改为 __来源__
- **新增** SDK 提供 Workspace 和 Resource 的绑定变化通知
- **新增** 完整对接 Insight metrics 和 otel tracing（加入 keycloak 和 db 链路）
- **新增** Keycloak 改成 Quarkus 架构
- **新增** Keycloak 镜像升级成 20.0.1 版本

#### 优化

- **优化** 重构导出审计日志 http 接口为 gprc stream 接口
- **优化** SDK 内存使用量优化，峰值减少 50%
- **优化** 审计日志部分代码优化
- **优化** e2e 的 kind 镜像切到 1.25
- **优化** 提高资源使用效率到 40% 以上

#### 修复

- **修复** 强绑定集群问题
- **修复** 配置身份提供商界面选择 __Client secret sent as basic auth__ 没有保存到 keycloak 里的问题

## 2022-11-01

### v0.11.2

#### 修复

- **修复** 关闭资源组绑定集群功能
- **修复** 无工作空间时无法创建工作空间问题

## 2022-10-28

### v0.11.0

#### 功能

- **新增** 给第三方应用提供接口在 Keycloak 创建 SSO 对接 Client
- **新增** 支持 Mysql8
- **新增** 对接 Insight（metrics, log, otel tracing）
- **新增** License 模块名支持 i18n
- **新增** 支持一个 License 中可以包含多个 GProduct
- **新增** 资源组新增绑定集群类型资源
- **新增** 资源组列表增加“模块”字段
- **新增** 资源组列表增加已绑定标识
- **新增** 资源绑定接口支持 Registry 资源种类。

#### 优化

- **优化** 资源种类改枚举
- **优化** GProduct license 是否需要灌入变量改为可配
- **优化** CICD 流程

#### 修复

- **修复** 已经删除的集群依然存在问题
- **修复** keycloak jwks 变化后没有重置 Istio 缓存问题
- **修复** 用户组创建时间零值问题
- **修复** 访问密钥 __最后使用时间__ 字段在未使用时返回空字符

## 2022-09-28

### v0.10.0

#### 功能

- **新增** 支持登录
- **新增** 支持忘记密码
- **新增** 支持站内信增删改查功能
- **新增** 支持 SMTP 设置邮件服务器
- **新增** 支持顶部导航栏获取查询
- **新增** 支持顶部导航栏更新
- **新增** 支持用户角色权限管理 CRUD
- **新增** 工作空间 -> 生命周期管理（创建/编辑/删除/查看/列表）
- **新增** 工作空间 -> 层级关系管理（绑定/列表）
- **新增** 工作空间 -> 工作空间与资源关系管理（绑定/解绑/列表）
- **新增** 工作空间 -> 工作空间和角色和用户（组）关系管理（绑定/解绑/列表）（API/SDK）
- **新增** 工作空间 -> 鉴权（API/SDK）
- **新增** 工作空间 -> GProduct 资源名字注册
- **新增** 关于 -> 产品版本（创建/编辑/删除/查看/列表）
- **新增** 关于 -> 开源软件（列表/初始化）
- **新增** 关于 -> 技术团队（列表/初始化）
- **新增** 许可证 -> 生命周期管理（创建/编辑/删除/查看/列表）
- **新增** 许可证 -> 获取 ESN 序列号
- **新增** 许可证 -> 未灌入或错误情况处理
- **新增** 工作空间 -> 资源配额管理（创建/编辑/删除/查看/列表/计算已分配）
- **新增** 工作空间 -> GProduct 资源配额注册
- **新增** 用户与访问控制 -> 鉴权（APIServer/SDK）
- **新增** 审计日志 -> 展示（查看/列表/清理设置/导出）
- **新增** 审计日志 -> 批量插入
- **新增** 身份提供商 -> 对接 LDAP -> 用户/用户组同步设置（创建/编辑/删除/查看/同步）
- **新增** 平台设置 -> 安全策略 -> 密码策略设置
- **新增** 个人中心 -> 访问密钥(创建/编辑/删除/查看/列表)
- **新增** 审计日志 -> 全局管理操作插入审计日志
- **新增** 审计日志 -> 对接 Insight 来收集审计日志
- **新增** 平台设置 -> 安全策略 -> 账号锁定策略
- **新增** 平台设置 -> 安全策略 -> 浏览器关闭策略
- **新增** 身份提供商 -> 对接 IDP (OIDC 协议)
- **新增** 工作空间 -> 共享集群权限管理
- **新增** 工作空间 -> 共享集群配额管理 -> 存储
- **新增** 平台设置 -> 顶部导航外观定制 -> 重置功能
- **新增** 平台设置 -> 安全策略 -> 会话超时策略
- **新增** 审计日志 -> 自动清理功能
- **新增** 平台设置 -> 安全策略 -> 账号锁定策略
- **新增** 平台设置 -> 顶部导航外观定制 -> 还原功能
- **新增** 平台设置 -> 登录页外观定制 -> 还原功能
- **新增** 产品导航 -> 首页仅对 admin 用户展示
- **新增** 工作空间 -> 用户仅能查看有权限的工作空间与层级的树状结构
- **新增** Keycloak 高可用
- **新增** 邮件服务器配置 -> 支持 Insight 和应用工作台发送邮件
- **新增** 满足 Helm 规范，支持安装器和离线化
- **新增** 审计日志 -> 数据库自动创建和合并分区
- **新增** 支持 ARM64 架构
- **新增** 支持 https
- **新增** 登录 -> 背景 theme 支持动画
- **新增** 授权鉴权 -> 给前端提供当前登录用户的权限列表
- **新增** 关于 -> 软件版本 -> 模块支持中文名
- **新增** 添加整体双语文档站结构及主要内容

#### 优化

- **优化** 授权鉴权 -> 提供一个 Job 来确保数据库和自定义资源的同步
- **优化** LDAP -> 配置错误检查
- **优化** 各功能操作反馈和提示语报错支持中英文
- **优化** 工作空间及层级 -> 删除前对是否存在子资源进行检查
- **优化** keycloak jvm 参数
- **优化** 通过 mockery 框架简化 mock