# å­˜å‚¨ç½‘å¡é…ç½®

HwameiStor æ”¯æŒä½¿ç”¨å•ç‹¬çš„ç½‘å¡è¿›è¡Œæ•°æ®å·åŒæ­¥ï¼Œå¯ä»¥é¿å…ä½¿ç”¨é€šä¿¡ç½‘å¡å¸¦æ¥æµé‡é˜»å¡é—®é¢˜ã€‚

!!! note

    - ã€ğŸ”¥æå‰é…ç½®ã€‘ï¼šå­˜å‚¨ç½‘å¡çš„é…ç½®å±äºå­˜å‚¨ç³»ç»Ÿçš„å‰ç½®æ€§é…ç½®ï¼Œå»ºè®®åœ¨ HwameiStor ç³»ç»Ÿå®‰è£…å‰ **æå‰é…ç½®**ã€‚
    - ã€è¿è¡Œä¸­é…ç½®ã€‘ï¼šå¦‚æœ HwameiStor å·²ç»éƒ¨ç½²ï¼Œåé¢è¿›è¡Œä¸Šè¿°é…ç½®ä¿®æ”¹ï¼Œé‚£ä¹ˆ**å¯¹ä¹‹å‰å·²ç»åˆ›å»ºå‡ºæ¥çš„æ•°æ®å·ä¸ä¼šç”Ÿæ•ˆ**ï¼Œä¹Ÿå°±æ˜¯è¿˜ä¼šä½¿ç”¨ä¹‹å‰çš„ç½‘å¡è¿›è¡Œæ•°æ®å·åŒæ­¥ã€‚
    -  å¦‚éœ€è¦ä¿®æ”¹å¤šä¸ªèŠ‚ç‚¹å­˜å‚¨ç½‘å¡ï¼Œè¯·é€ä¸ªé…ç½®ï¼Œç›®å‰æ— æ³•æ‰¹é‡é…ç½®

## å‰ææ¡ä»¶

å·²ç»æå‰å®Œæˆå­˜å‚¨ç½‘å¡è§„åˆ’ï¼Œè¯·å‚è€ƒ[ç½‘å¡è§„åˆ’](../../../network/plans/ethplan.md)ã€‚

## é…ç½®æ­¥éª¤

é…ç½®æ–¹å¼åˆ†ä¸º 2 ç§ï¼š

1. é€šè¿‡ LocalStorage CR é…ç½®
2. é€šè¿‡èŠ‚ç‚¹æ³¨é‡Šæ ‡è®°

### ä¿®æ”¹ LocalStorage CR é…ç½®

1. åœ¨å·¦ä¾§å¯¼èˆªæ ç‚¹å‡» `å®¹å™¨ç®¡ç†` â€”> `é›†ç¾¤åˆ—è¡¨`ï¼Œæ‰¾åˆ°`å¾…ä¿®æ”¹ç½‘å¡é…ç½®çš„é›†ç¾¤`ï¼Œè¿›å…¥é›†ç¾¤è¯¦æƒ… ã€‚

2. åœ¨å·¦ä¾§å¯¼èˆªæ ä¸­é€‰æ‹© `è‡ªå®šä¹‰èµ„æº`ï¼Œæ‰¾åˆ° `localstoragenodes.hwameistor.io`ï¼Œç‚¹å‡»è¿›å…¥è¯¦æƒ…ã€‚

    ![Ethedit01](../../images/ethEdit01.jpg)

3. æ‰¾åˆ°`å¾…ä¿®æ”¹èŠ‚ç‚¹`å¹¶ç‚¹å‡»`ç¼–è¾‘ YAML`ï¼Œä¿®æ”¹ `spec` ä¸­çš„ `storage-ipv4=172.30.40.12` å‚æ•°ï¼Œ
   æŒ‡å®š IP åœ°å€ä¸ºå·²è§„åˆ’ç½‘å¡ IP [ç½‘å¡è§„åˆ’](../../../network/plans/ethplan.md)ã€‚
   
    ![ethedit02](../../images/ethedit02.jpg)
   
    ![ethedit03](https://docs.daocloud.io/daocloud-docs-images/docs/storage/images/editeth03.jpg)

4. å®Œæˆåç‚¹å‡»`ä¿å­˜`ï¼Œå¹¶é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œä¿®æ”¹ã€‚

### é€šè¿‡èŠ‚ç‚¹æ³¨é‡Šæ ‡è®°

1. æŸ¥çœ‹ local-storage çš„ ENV: **NODE_ANNOTATION_KEY_STORAGE_IPV4** çš„å€¼ï¼Œé»˜è®¤æ˜¯
    **[localstorage.hwameistor.io/storage-ipv4](http://localstorage.hwameistor.io/storage-ipv4)**

2. å°†èŠ‚ç‚¹ä¸Šçš„ **å­˜å‚¨ç½‘å¡åœ°å€é€šè¿‡æ³¨é‡Šçš„æ–¹å¼æ ‡è®°**

    ```sh
    kubectl annotate node <your_storage_node> localstorage.hwameistor.io``/storage-ipv4``=172.30.46.12
    ```

3. **é‡å¯** èŠ‚ç‚¹ä¸Šçš„ local-storage æœåŠ¡

4. **éªŒè¯** é…ç½®æ˜¯å¦ç”Ÿæ•ˆ

    ```sh
    kubectl get lsn <your_storage_node> -o yaml |``grep` `-i storageIP
    ```

5. ä¿®æ”¹æˆåŠŸåï¼Œè¿›è¡Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¿®æ”¹ã€‚
