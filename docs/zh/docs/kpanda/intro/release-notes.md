# 容器管理 Release Notes

本页列出容器管理的 Release Notes，便于您了解各版本的演进路径和特性变化。

## 2023-8-01

### v0.20.0

#### 新功能

- **新增** Helm 应用界面支持查看 Helm 操作日志。
- **新增** 工作集群支持接入异构节点。
- **新增** 创建集群支持批量导入节点。
- **新增** 容器存储支持创建 NFS 类型的数据卷。
- **新增** 新增 vGPU 支持，支持自动识别节点 CPU、支持新增为负载配置 CPU 配额。

#### 优化

- **优化** 优化集群接入逻辑，当接入集群二次接入新管理平台时，需要预先清理旧管理平台的数据冗余才能被接入，关于集群接入的更多细节，请参考[卸载/解除接入集群](../user-guide/clusters/delete-cluster.md)。
- **优化** 升级 clusterpedia 到 v0.7.0。
- **优化** 优化基于权限的页面交互，无权限用户将无法进入无资源权限的页面。
- **优化** 接入节点支持配置内核调优等高级参数配置。
- **优化** Insight 组件安装检测机制。

#### 修复

- **修复** 修复 helm 任务一直处在`安装中`、`卸载中`的问题。
- **修复** 创建集群节点检查内核版本检测错误问题。
- **修复** 创建集群插件无法自定义命名空间的问题。
- **修复** 更新密钥默认增加 `ca.crt` 数据的问题。

## 2023-7-06

### v0.19.0

#### 新功能

- **新增** 兼容 openAnolis / oracle linux 操作系统部署工作集群。
- **新增** 离线环境创建集群支持自动添加 jfrog 的认证信息。
- **新增** 创建工作负载新增环境变量规则校验。
- **新增** 新增边缘负载和服务。
- **新增** 新增双栈、系统内核作为节点前置检查项。
- **新增** 创建工作负载新增 secretKey/configmapKey 作为配置项挂载在容器内。

#### 优化

- **优化** 优化 Helm 仓库刷新机制。
- **优化** 优化部分 I8N 英文翻译界面。

#### 修复

- **修复** 修复在创建集群时，填写自定义参数，如果value为0或者1，会被错误转换为true或者false的问题。
- **修复** 修复在离线环境创建集群时，无法写入containerd账号密码配置的问题。
- **修复** 修复对 1.26 及以上版本的集群进行升级时，由于 kubernetes 镜像仓库更改的原因，导致集群升级失败的问题。
- **修复** 修复命名空间级用户无法使用StorageClasses 创建PV 相关问题。
- **修复** 修复创建路由时指定命名空间不生效的问题。
- **修复** 修复集群升级后，日期返回错误问题。

## 2023-6-03

### v0.18.1

#### 优化

- **优化** 安装集群设置自定义参数时不限最大长度。

## 2023-5-28

### v0.18.0

#### 新功能

- **新增** 巡检报告下载。
- **新增** 对接高优先级操作全局审计日志。
- **新增** 连接 Minio 的超时处理。

#### 优化

- **优化** CloudShell 由用 ConfigMap 进行 KubeConfig 挂载改为用 Secret 进行 KubeConfig 挂载。
- **优化** 创建备份策略集群下拉列表新增过滤创建了备份策略的集群的开关。

#### 修复

- **修复** etcdbrctl 镜像离线化。
- **修复** 镜像选择器无法选择镜像。
- **修复** 创建集群时的 Repo 地址渲染。

## 2023-04-28

### v0.17.0

#### 新功能

- **新增** 巡检报告下载
- **新增** 查看 ETCD 备份日志
- **新增** 创建集群支持启用 Flannel、Kube-ovn 网络插件
- **新增** 创建集群启用 Cilium 双栈网络
- **新增** 创建集群支持自动识别节点 OS 类型
- **新增** Headless、External 类型的服务
- **新增** 离线环境下升级工作集群的 kubernetes 版本
- **新增** 集群级资源备份
- **新增** 使用私有密钥创建工作负载
- **新增** 配置 Helm job 的默认资源限制
- **新增** 使用 hwameistor 创建 PVC

#### 优化

- **优化** 应用备份集群状态
- **优化** 负载详情内负载状态和负载下容器组状态不匹配的问题
- **优化** 离线模式下节点检查接口
- **优化** 多云应用的展示方式

#### 修复

- **修复** 更新 helm 应用配置丢失的问题
- **修复** 使用 yaml 创建多种类型资源由于 ns 不一致导致创建失败的问题
- **修复** 使用麒麟操作系统无法选择 Docker 19.03 运行时，导致创建集群失败的问题
- **修复** 英文界面的错误翻译

## 2023-04-04

### v0.16.0

#### 新功能

- **新增** 使用界面查询 PVC 事件。
- **新增** 创建任务支持配置 backofflimit、completions、parallelism、activeDeadlineSeconds 等参数。
- **新增** 集成自研开源存储组件 Hwameistor，支持在 `容器存储` 模块查看本地存储资源概览等信息。
- **新增** 新增集群巡检功能，支持对集群进行秒级巡检（Alpha）。
- **新增** 新增应用备份功能，支持界面化快速对应用进行备份和恢复（Alpha）。
- **新增** 新增平台备份功能，支持对 ETCD 数据进行备份和恢复（Alpha）。
- **新增** 支持 Ghippo的自定义角色管理集群。

#### 优化

- **优化** Kpanda 卸载自建集群的流程，以此避免因用户误操作导致集群被删除。
- **优化** 界面创建集群失败后重新创建集群的用户体验，支持用户基于失败前的配置快速重新安装集群。
- **优化** 优化了当一个 命名空间下存在多个 Quota 资源时的处理逻辑。对多个 Quota 进行了聚合处理
- **优化** 工作负载详情内服务访问方式的信息展示，支持快速对负载服务进行访问。
- **优化** 优化 Helm 仓库刷新机制，默认不开启自动刷新

#### 修复

- **修复** Loadblance 地址无法访问的问题。
- **修复** 执行卸载集群操作失败的问题。
- **修复** 接入集群超过 64 个字符导致集群无法获取的问题。
- **修复** 修复离线环境集群无法展示集群插件的问题。
- **修复** Global 集群无法更新配置的问题。
- **修复** 创建集群时，第一次节点检查失败，无法再次执行节点检查的问题。
- **修复** 创建/更新工作负载的环境变量不生效的问题。

## 2023-02-27

### v0.15

#### 新功能

- **新增** 对 PV(Persistent Volumes) 的产品化支持，支持在创建 PVC 时选择已有数据卷。
- **新增** 使用 kubernetes 无网络 CNI 创建集群的能力。
- **新增** 支持负载、配置、服务等资源中文名称。
- **新增** 通过 YAML 创建工作负载支持同时创建多种类型资源。
- **新增** 工作负载的暂停、启动功能。

#### 优化

- **优化** 集群详情页，集群切换的使用体验。
- **优化** 工作负载状态显示，增加`已停止（Stopped）`状态。
- **优化** 工作负载增加手动扩缩容窗口，简化用户手动扩缩负载流程。
- **优化** 接入集群无法接入 DCE4.X 集群问题。

#### 修复

- **修复** 修复了创建集群时，DNS 配置强制要求用户填写 upstream DNS 的问题。
- **修复** 修复了工作负载版本记录排序混乱问题。
- **修复** 通过 Helm 升级 Kubean 无效的问题。
- **修复** 创建集群执行节点检查失败后再次检查，上次的异常提示未消失的问题。
- **修复** 创建工作负载，镜像拉取失败问题。
- **修复** 定时的备份策略，无法执行`立即执行`操作的问题。
- **修复** 修改无资源限制的工作负载时，UI 会自动添加资源限制问题。
- **修复** 当`工作空间`没有与任何用户进行绑定时，往这个`工作空间`添加命名空间失败的问题。
- **修复** 修复绑定、解绑命名空间会导致命名空间注解消失的问题。
- **修复** 修复创建集群使用 `kube-vip` 策略不生效的问题。
- **修复** 创建集群设置 `ntp servers` 为空时，将清空主机已有 `ntp` 地址问题。

## 2022-12-29

### v0.14

#### 新功能

- **新增** Helm 模板支持展示中文名称和模板供应商。
- **新增** CronHPA，支持定时伸缩工作负载。
- **新增** VPA（垂直伸缩），支持手动/自动两种方式修改资源请求值，实现工作负载垂直伸缩。
- **新增** Namespace 独享主机功能。
- **新增** 存储池（StrogeClass）支持授权给特定命名空间独享或共享。
- **新增** 创建工作负载支持展示当前命名空间剩余资源配额。
- **新增** 节点连通性检查功能。
- **新增** 新增镜像选择器，支持创建工作负载时选择镜像仓库内的镜像。
- **新增** 应用备份与恢复功能。

#### 优化

- **优化** 集群卸载流程，增加集群删除保护开关。
- **优化** 通过 YAML 创建资源时支持同时创建多个资源。
- **优化** 工作负载增加手动扩缩容窗口，简化用户手动扩缩负载流程。
- **优化** 服务（Service）访问方式体验，支持服务快速访问和展示节点、负载均衡地址。
- **优化** 文件上传下载支持选择特定容器。
- **优化** 支持不同 OS 系统离线安装。
- **优化** 离线环境下创建集群——节点配置支持选择节点操作系统和修改离线 Yum 源。
- **优化** YAML 编辑器未填写 Namespace 字段，支持自动补齐为 Default。
- **优化** 集群升级界面交互体验。
- **优化** 使用 Helm 创建应用时，提供 Namespace 快速创建入口。

#### 修复

- **修复** 无法使用密码新增节点的问题。
- **修复** 获取 Token 方式接入的集群 kubeconfig 错误问题。
- **修复** 授予权限时无法获取完整的用户和用户组。
- **修复** Bindingsync 组件不正常时解绑工作空间原始权限存在问题
- **修复** Workspace Resync 无法正确将多余权限删除的问题。
- **修复** 删除中的 Namespace 还可以被选择的问题。
- **修复** 创建密钥，密钥数据单行显示的问题。

## 2022-11-29

### v0.13

#### 新功能

- **新增** Replicatsets 产品化：
    - 支持使用 WEB 终端（CloudTTY）管理 Replicatsets。
    - 支持查看 Replicatsets 监控、日志、Yaml、事件、容器。
    - 支持查看 Replicatsets 详情。
    - 联动**应用工作台**，由灰度发布管理 Replicatsets 全生命周期。
- **新增** Pod 详情页面。
- **新增** 命名空间详情页。
- **新增** 使用 WEB 终端 上传文件至容器内及从 Pod 内下载文件至本地。
- **新增** 工作负载基于自定义指标弹性伸缩，更加贴近用户实际业务弹性扩缩容需求。

#### 优化

- **优化** 部署集群支持：
    - 使用 cilium CNI 部署集群。
    - 使用不同用户名、密码、SSH 端口的节点创建集群。
- **优化** Pod 列表支持查看容器组总数和运行中数量，以及支持查看容器类型。
- **优化** 工作负载增加手动扩缩容窗口，简化用户手动扩缩负载流程。
- **优化** 容器日志支持查看 init container 和 ephemeral container，提供更友好的运维体验。
- **优化** 节点详情，注解 vaule 值未正确展示问题。
- **优化** 操作提示反馈，给予用户操作以正确的反馈。

#### 修复

- **修复** 因创建命名空间和绑定工作空间强耦合导致创建命名空间失败的问题。
- **修复** 更新路由规则无法修改转发策略的路径前缀问题。
- **修复** 创建工作负载界面同时创建 Services 不生效的问题。
- **修复** 更新服务异常报错问题。
- **修复** 无法接入 AWS 集群问题。
- **修复** 使用 WS Admin 用户绑定资源组后用户列表不同步问题。
- **修复** 配置详情页，PageSize=50 时，ListClusterConfigMaps 接口 异常报错问题。

## 2022-10-28

### v0.10

#### 新功能

- **新增** NetworkPolicy 策略管理功能，包括创建、更新、删除 NetworkPolicy 策略，以及 NetworkPolicy 策略详情展示，帮助用户为 Pod 配置进网络出入流量策略
- **新增** 工作负载支持多网卡配置和支持 IP Pool 展示，满足用户为工作负载配置单独配置多网卡需求
- **新增** 集群创建失败后支持查看创建过程的操作日志，帮助用户快速定位故障
- **新增** 有状态工作负载支持使用动态数据卷模板
- **新增** 创建集群、创建 Secret、创建 Ingress、编辑命名空间配额的信息校验，帮助引导用户输入正确的配置参数，降低用户创建任务失败体验

#### 优化

- **优化** 集群下拉列表支持展示集群状态，优化用户在创建集群选择被纳管集群、创建命名空间选择目标集群、集群授权选择目标集群的使用体验
- **优化** 在 helm 应用中安装 insight-agent 插件，支持自动获取并填充全局服务集群的 Insight-server 相关地址
- **优化** Helm 模板图标为空时的默认图标
- **优化** 创建集群时选择网络模式为 None，以允许用户在集群创建完成后再安装网络插件
- **优化** 集群操作信息架构：
    - 将集群列表和集群概览页面的集群升级操作，调整至集群详情内的集群运维功能下
    - 当某个管理集群在集群列表内移除后，基于这个管理集群创建的集群将在界面隐藏   集群升级、纳管节点、删除节点操作

#### 修复

- **修复** 资源切换时，所选命名空间自动转换为全部命名空间的问题
