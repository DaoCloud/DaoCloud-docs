# 术语表

本页介绍 DEC 5.0 各个模块中的常见术语。

- 保护阈值

    阈值是一个 0 到 1 之间的浮点数。当健康实例数占总服务实例数的比例小于该值时，无论实例是否健康，都会将这个实例返回给客户端。这样可以防止流量压力把健康实例压垮并形成雪崩效应。

- Data ID

    Nacos 中某个配置集的 ID。配置集是一组配置项的集合，通常表现为一个配置文件，其中包括系统各方面的配置。

- 服务发现

    用于 Kubernetes 环境的服务发现配置，用于批量且自动地接入 Kubernetes 上的监控点。

- 服务网格 (Service Mesh)

    服务网格是在网络层 TCP/IP 上建立的一个中间层，接管服务之间的通信流量，将微服务治理能力下沉，从而实现对上层应用透明、不限制语言、无侵入的享受微服务能力。使用服务网格时，通过还会在应用服务旁边注入一个 SideCar 代理，实现对服务网络流量的拦截。

- 告警规则

    基于资源状态创建告警对象，自定义触发规则的条件以及通过何种方式发送通知的规则。

- 工作空间 (Workspace)

    工作空间是一种资源范畴，代表一种资源层级关系。工作空间可以包含集群、命名空间、注册中心等资源。通常一个工作空间对应一个项目，可以为每个工作空间分配不同的资源，指派不同的用户和用户组。

- Grafana

    Grafana 是一个开源的可视化平台，提供了多样的监控数据可视化面板。

- Group

    Nacos 中的一组配置集。

- 滚动更新

    滚动更新指一次只更新一小部分副本，成功后再更新更多的副本，最终完成所有副本的更新。滚动更新的最大的好处是零停机，整个更新过程始终有副本在运行，从而保证业务的连续性。

- 汇总（Summary）

    类似于直方图，汇总也对观察结果进行采样。除了可以统计采样值总和和总数，它还能够按分位数统计。有以下几种方式来产生汇总（假设度量指标为 `<basename>`）：

    - 按分位数，也就是采样值小于该分位数的个数占总数的比例小于 φ，相当于 `<basename>{quantile="<φ>"}`
    - 采样值总和，相当于 `<basename>_sum`
    - 采样值总数，相当于 `<basename>_count`

- 计量器（Gauge）

    计量器是一个**既可增又可减**的度量指标值。计量器主要用于测量类似于温度、内存使用量这样的瞬时数据。

- 计数器（Counter）

    计数器是一种累计型的度量指标，它是一个**只能递增**的数值。计数器主要用于统计类似于服务请求数、任务完成数和错误出现次数这样的数据。

- 链路

    记录单次请求范围内的处理信息，其中包括服务调用和处理时长等数据。一个 Trace 有一个唯一的 Trace ID ，并由多个 Span 组成。

- 临时微服务实例

    不能持久化存储在 Nacos 服务端的微服务实例。临时微服务实例需要通过上报心跳的方式进行包活，如果一段时间内没有上报心跳，就会被 Nacos 服务端摘除。


- 命名空间（微服务治理模块）

    在微服务引擎中，命名空间指的是 Nacos 命名空间，主要用于实现租户层级的配置隔离，例如隔离开发环境、测试环境、生产环境的资源配置。

- 目标

    Prometheus 抓取的采集目标。采集目标暴露自身状态，或者代理暴露监控对象的运行、业务指标。

- Nacos 集群节点角色

    节点在 Raft 协议中的角色。Raft 是一种实现分布式共识的协议，即如何让多个节点达成一致。

    - Leader

        所有请求的处理者，负责接收客户端发起的操作请求，将请求写入本地日志并向其他节点同步请求日志。任何时候最多只能有一个 Leader。

    - Follower

        Leader 的跟随者，负责从 Leader 接收更新请求并将其写入本地日志，并在 Leader 通知可以提交日志时提交日志。


- Prometheus

    Prometheus是一套开源的监控、报警、时间序列数据库的组合。

- PromQL

    Prometheus 内置的数据查询语言，其提供对时间序列数据丰富的查询，聚合以及逻辑运算能力的支持。

- 全局限流

    可选择增加网关限流组件，通过限流组件可以支持更多的流量管控能力。但是，限流组件也会导致一定的资源消耗和性能损失，默认情况下不启用。请根据实际情况判断是否需要启用。

- 权重

    权重为浮点数。权重越大，表示分配给该实例的流量越大。

- 日志

    系统运行过程中变化的一种抽象数据，其内容为指定对象的操作和其操作结果按时间的有序集合。

- 审计日志

    审计日志提供了对系统中对象所做更改的历史记录。

- 通知

    当资源存在异常而产生告警时，可将告警信息通过邮件、钉钉、企业微信、webhook等方式发送给指定的用户。

- 网关工作节点

    工作节点主要运行 Envoy 开源应用，主要提供高性能的反向代理能力，支持负载均衡、路由、缓存、自定义路由等功能。工作节点的数量和性能将直接影响网关的性能，建议根据需要部署足够的工作节点。

- 网关控制节点

    Contour 作为微服务网关的控制面，被部署为控制节点，充当 Envoy 的后端管理服务能力。Contour 提供便捷的网关配置，支持动态配置更新，多集群部署能力。Contour 同时提供了 HTTPProxy CRD 用于增强 Kubernetes Ingress 的核心配置能力，Contour 以 Deployment 的方式部署，为保障生产服务稳定性，建议部署在多个副本。

- 微服务

    微服务是一种通过多个小型服务组合来构建单个应用的架构风格。在微服务引擎中，微服务指将一个完整的应用根据业务功能拆分而得到的各个小型服务。

- 微服务实例

    将同一个微服务部署在多个容器或虚拟机上，每个容器或虚拟机上运行的微服务副本就是一个微服务实例。多个微服务实例可以同时运行。

- 微服务实例分组

    将同一个微服务下的所有微服务实例按照需求进一步划分得到的分组。

- 心跳

    实例启动后每隔一段时间，内置的 Nacos 客户端会主动向 Nacos 服务器发起心跳包（HeartBeat），表示实例仍存活，避免被服务端剔除。心跳包包含当前服务实例的名称、IP、端口、集群名称、权重等信息。

- 依赖拓扑

    以拓扑图的方式展示服务调用之间的依赖关系。

- 元数据

    元数据是数据本身的描述信息，是关于数据的数据，例如服务版本、各种自定义标签等。元数据分为服务级别的元数据、集群的元数据及实例的元数据。

- 资源请求值

    请求值规定了为实例预先分配多少可用资源。

- 资源限制值

    限制值是实例的可用资源上限。请求值小于限制值。

- 诊断模式

    诊断模式即对 Contour 进行功能调试，支持在 Contour 启动时附加对应的启动参数。

- 直方图（Histogram）

    直方图对观察结果（通常是请求持续时间或者响应大小这样的数据）进行采样，并在可配置的桶中对其进行统计。有以下几种方式来产生直方图（假设度量指标为 `<basename>`）：

    - 按桶计数，相当于 `<basename>_bucket{le="<upper inclusive bound>"}`
    - 采样值总和，相当于`<basename>_sum`
    - 采样值总数，相当于 `<basename>_count` ，也等同于把所有采样值放到一个桶里来计数 `<basename>_bucket{le="+Inf"}`

    Histogram 可以理解为柱状图，典型的应用如：请求持续时间，响应大小。可以对观察结果采样，分组及统计。

- 注册中心

    注册中心相当于微服务架构中的“通讯录”，负责记录服务和服务地址的映射关系。微服务引擎支持的注册中心类型有：Eureka、Zookeeper、Nacos、Mesh、Kubernetes。

- 指标

    对资源性能的数据描述或状态描述，指标由命名空间、维度、指标名称和单位组成。采集目标暴露的、可以完整反映监控对象运行或者业务状态的一系列标签化数据。
